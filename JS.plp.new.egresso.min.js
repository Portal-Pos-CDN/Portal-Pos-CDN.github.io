/* MZTNTB05 - 19/01/2023 12:34:24 GMT */
"use strict";(function(){try{var Egresso={init:function init(){Egresso.fixBrands();Egresso.applyMaskInPhone();Egresso.applyMaskInEmail();Egresso.includeanograduacao();Egresso.onSubmitForm();Egresso.locateCosmos();if($(window).width()<991){Egresso.mobileChanging()}},ajaxStop:function ajaxStop(){},windowOnload:function windowOnload(){},fixBrands:function fixBrands(){if(window.location.pathname.indexOf("lfg-ex-aluno")>-1){$.cookie("marcaOrigem","lfg",{expires:2});$(".MZh__n-brand img").attr("src","https://portalpos2.vteximg.com.br/arquivos/portalpos2.logo-secondadry-lfg-1.png")}else if(window.location=="https://www.portalpos.com.br/ex-aluno"){$.removeCookie("marcaOrigem")}},applyMaskInPhone:function applyMaskInPhone(){var form=$("#lead-egressos");var SPMaskBehavior=function SPMaskBehavior(val){return val.replace(/\D/g,"").length===11?"(00) 00000-0000":"(00) 0000-00009"};$("#anograduacao").mask("00/0000");$("#lead-telefone").mask(SPMaskBehavior,{onKeyPress:function onKeyPress(val,e,field,options){field.mask(SPMaskBehavior.apply({},arguments),options)}});form.find('input[name="telefone"]').on("change",(function(){var telefone=$(this).val();if(telefone.length<14){if($(this).find(".error").length===0){$(this).parent().append('<label for="telefone" class="error">Por favor, forneça um número válido.</label>')}}else{$(this).parent().find("label.error").remove()}}))},emailValidate:function emailValidate(email){var regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return regex.test(email)},applyMaskInEmail:function applyMaskInEmail(){var form=$("#lead-egressos");form.find('input[name="email"]').on("change",(function(){var email=$(this).val();if(!Egresso.emailValidate(email)){if($(this).find(".error").length===0||$(this).val().indexOf(".")==-1){$(this).parent().find("label.error").remove()}else{$(this).parent().find("label.error").remove()}}else{$(this).parent().find("label.error").remove()}}))},onSubmitForm:function onSubmitForm(){var form=$("#lead-egressos");form.validate({rules:{nome:{required:true},email:{required:true},telefone:{required:true}},submitHandler:function submitHandler(form,event){event.preventDefault();var $form=$(form);var isValid=$form.valid();if(!isValid){return}var formData=$form.serializeObject();var anograduacao="".concat(formData.mesgraduacao,"/").concat(formData.anograduacao);formData.anograduacao=anograduacao;delete formData["mesgraduacao"];Egresso.sendDataToMD(formData);return false},errorPlacement:function errorPlacement(error,element){element.closest(".form__controls").append(error)}})},locateCosmos:function locateCosmos(){$(".section-04-texto  p:nth-child(3)").html('<font color="#333333" face="Poppins, Arial, Helvetica, sans-serif"><b>Ambiente Virtual de Aprendizagem (A.V.A): </b>Sistema exclusivo da pós-graduação (mobile e desktop), com ótima avaliação pelos nossos alunos. Possui diversos autosserviços, upload de documentos, atendimento de secretaria, comunicação com tutor e solicitação de outros serviços. Além da jornada acadêmica completa com video aulas, material didatico, leitura complementar e avaliação virtual. Ao fim do curso terá ainda o certificado digital disponivel.\n                </font>');setInterval(locateCosmos,5e3)},includeanograduacao:function includeanograduacao(){var element=['<option disabled="disabled" value="**" selected="selected">ano</option>'];for(var index=1970;index<2035;index++){element.push('<option value="'.concat(index,'">').concat(index,"</option>"))}$("#lead-egressos #anograduacao").html(element)},mobileChanging:function mobileChanging(){var formMail=$(".form__wrapper.mail");var formPhone=$(".form__wrapper.phone");var formDate=$("#mesAntigo");$(".form__wrapper.name").after(formMail,formPhone);$(".form__wrapper.graduated").after(formDate)},sendToCallCenter:function sendToCallCenter(prmData){var orderForm=window.storeHelpers.generic.getOrderForm();var fullName=prmData.nome.split(" ");var firstName=fullName.shift();var lastName=fullName.join(" ");var receberOfertas=prmData.reberofertas;var lead={options:{somente_lead:true},lead:{attributes:{firstname:firstName,lastname:lastName,emailaddress1:prmData.email,mobilephone:window.storeHelpers.callCenter.normalizeTel(prmData.telefone),crmeduc_aceito_receber_emails_com_novidades:receberOfertas,platos_ultima_origemplatos:191030008,crmeduc_faculdade_marca:window.storeHelpers.callCenter.getMarcaId(""),address2_stateorprovince:prmData.estado,address1_city:prmData.cidade,cad_mensagem:prmData.unidade,crmeduc_mes_ano_formacao:prmData.anograduacao,cad_campaignname:orderForm.marketingData?orderForm.marketingData.utmCampaign:"",cad_campaigncontent:orderForm.marketingData?orderForm.marketingData.utmiCampaign:"",cad_campaignmedium:orderForm.marketingData?orderForm.marketingData.utmMedium:"",cad_campaignsource:orderForm.marketingData?orderForm.marketingData.utmSource:""}},concurso:{attributes:{cad_codigo:window.storeHelpers.callCenter.getConcursoId()}}};console.log("lead enviada",lead);window.storeHelpers.callCenter.senderLead(lead)},sendDataToMD:function sendDataToMD(dataJson){if(dataJson.receberofertas){dataJson.receberofertas=true}var data=new Date;var dia=String(data.getDate()).padStart(2,"0");var mes=String(data.getMonth()+1).padStart(2,"0");var ano=data.getFullYear();var dataAtual=dia+"/"+mes+"/"+ano;dataJson["urlenviada"]=window.location.href;dataJson["criadoem"]=dataAtual;$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},url:"https://www.portalpos.com.br/api/dataentities/lpexalunos/documents?_schema=mz-body",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(dataJson)}).done((function(response){swal({title:"Agradecemos seu cadastro!",icon:"success"}).then((function(){location.reload()}));Egresso.sendToCallCenter(dataJson)})).fail((function(){swal({icon:"error",text:"Erro ao cadastrar no formulário de eventos."}).then((function(){location.reload()}))}))},data:{currentData:[]}};$(document).ready(Egresso.init)}catch(e){console.log("Erro na instancia [Egressos]: ",e)}})();"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});"function"!=typeof String.prototype.capitalize&&(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()});"function"!==typeof String.prototype.replaceSpecialChars&&(String.prototype.replaceSpecialChars=function(){var b={"ç":"c","æ":"ae","œ":"oe","á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","ä":"a","ë":"e","ï":"i","ö":"o","ü":"u","ÿ":"y","â":"a","ê":"e","î":"i","ô":"o","û":"u","å":"a","ã":"a","ø":"o","õ":"o",u:"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U","Ê":"E","Ô":"O","Ü":"U","Ã":"A","Õ":"O","À":"A","Ç":"C"};return this.replace(/[\u00e0-\u00fa]/gi,(function(a){return"undefined"!=typeof b[a]?b[a]:a}))});Array.prototype.indexOf||(Array.prototype.indexOf=function(d,e){var a;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),b=c.length>>>0;if(0===b)return-1;a=+e||0;Infinity===Math.abs(a)&&(a=0);if(a>=b)return-1;for(a=Math.max(0<=a?a:b-Math.abs(a),0);a<b;){if(a in c&&c[a]===d)return a;a++}return-1});(function(){var _this=this;try{var AdvancedSearch={init:function init(){AdvancedSearch.applySelect2();AdvancedSearch.onSubmitClick();if($("body").hasClass("mz-brand-loaded")){AdvancedSearch.onSelectLocationClick()}},ajaxStop:function ajaxStop(){},windowOnload:function windowOnload(){},onSubmitClick:function onSubmitClick(){$(".MZadvancedSearch--btnSearch").click((function(){AdvancedSearch.onSubmit()}))},onSelectLocationClick:function onSelectLocationClick(){$(".MZadvancedSearch--body").addClass("mz-loaded");var wrapper=$('.MZadvancedSearch select[name="location"]');wrapper.on("select2:open",(function(){if(!wrapper.is(".mz-locations-loaded")){wrapper.addClass("mz-locations-loaded");AdvancedSearch.loadLocations()}}))},applySelect2:function applySelect2(){if(!$.fn.select2){return}var wrapper=$(".MZadvancedSearch");if($("body").hasClass("lpExtensao")){wrapper.find('select[name="typeCourse"]').select2({placeholder:"Tipo do Curso",dropdownParent:wrapper.find('select[name="typeCourse"]').parent(),data:[{id:"",text:""},{id:"01",text:"Cursos Livres"}]})}else{wrapper.find('select[name="typeCourse"]').select2({placeholder:"Tipo do Curso",dropdownParent:wrapper.find('select[name="typeCourse"]').parent(),data:[{id:"",text:""},{id:"01",text:"Cursos Livres"},{id:"02",text:"Pós-Graduação"}]})}wrapper.find('select[name="location"]').select2({placeholder:"Estado ou Cidade",allowClear:true,data:[{id:"",text:""}],dropdownParent:wrapper.find('select[name="location"]').parent()});wrapper.find('select[name="modality"]').select2({placeholder:"Modalidade",minimumResultsForSearch:-1,data:[{id:"",text:"EAD"}]});wrapper.find('select[name="course"]').select2({placeholder:"Escolha o Curso",data:[{id:"",text:""}]});wrapper.find('select[name="location"]').prop("disabled",true);wrapper.find('select[name="modality"]').prop("disabled",true);wrapper.find('select[name="course"]').prop("disabled",true);wrapper.find('select[name="location"]').parent().addClass("mz-select-loading");wrapper.find('select[name="typeCourse"]').on("select2:select",AdvancedSearch.getTypeCourse.bind(_this));wrapper.find('select[name="location"]').on("select2:select",AdvancedSearch.onSelectLocation.bind(_this));wrapper.find('select[name="modality"]').on("select2:select",AdvancedSearch.onSelectModality.bind(_this))},getModalityLabel:function getModalityLabel(modality){switch(modality){case"EDUCAÇÃO A DISTÂNCIA":return"EAD";case"EAD 10 MESES":return"EAD";case"PRESENCIAL":return"PRESENCIAL";case"EAD 6 MESES":return"INTENSIVO";case"EAD 4 MESES":return"SUPERINTENSIVO";case"SEMIPRESENCIAL":return"SEMI_PRESENCIAL"}},getVTEXModality:function getVTEXModality(modality){switch(modality){case"EDUCAÇÃO A DISTÂNCIA":return"Educação a distância";case"EAD 10 MESES":return"EAD - 10 meses";case"PRESENCIAL":return"Presencial";case"EAD 6 MESES":return"EAD - 6 meses";case"EAD 4 MESES":return"EAD - 4 meses";case"SEMI_PRESENCIAL":return"Semi-presencial"}},getBrandIdFromName:function getBrandIdFromName(brandName){var brand=window.storeConfig.brands.filter((function(brand){if(brand.name.replaceSpecialChars().toLowerCase()==brandName.replaceSpecialChars().toLowerCase()){return brand}}));if(brand){return brand[0].id}return null},getTypeCourse:function getTypeCourse(){var wrapper=$(".MZadvancedSearch");var typeCourseName=$('.MZadvancedSearch--select select[name="typeCourse"]').select2("data")[0].text;if(typeCourseName=="Cursos Livres"){wrapper.find('select[name="location"]').parent().css("visibility","hidden").css("position","absolute");wrapper.find('select[name="modality"]').parent().css("visibility","hidden").css("position","absolute");wrapper.find('select[name="location"]').prop("disabled",true);wrapper.find(".MZadvancedSearch--body").css("justify-content","center");wrapper.find(".MZadvancedSearch--select").css("margin-right","25px");AdvancedSearch.getCoursesExtension()}else{wrapper.find('select[name="location"]').prop("disabled",false);wrapper.find('select[name="modality"]').prop("disabled",true);wrapper.find('select[name="location"]').val(null).trigger("change");wrapper.find('select[name="course"]').val(null).trigger("change");wrapper.find('select[name="course"]').prop("disabled",true);wrapper.find('select[name="location"]').parent().css("visibility","visible").css("position","relative");wrapper.find('select[name="modality"]').parent().css("visibility","visible").css("position","relative");wrapper.find(".MZadvancedSearch--body").css("justify-content","space-around");wrapper.find(".MZadvancedSearch--select").css("margin-right","0")}switch(typeCourseName){case"Pós-Graduação":typeCourseName="POS_GRADUACAO";break;case"Cursos Livres":typeCourseName="EXTENSAO";break}sessionStorage.setItem("typeCourseName",typeCourseName)},loadLocations:function loadLocations(){var whereClause="";if($.cookie("marcaOrigem")){var brandId=AdvancedSearch.getBrandIdFromName($.cookie("marcaOrigem"));whereClause="?whereClause=";switch($.cookie("marcaOrigem")){case"unopar":whereClause+="(idMarca='".concat(brandId,"')")+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL')";break;case"lfg":whereClause+="(idMarca='".concat(brandId,"')");break;case"anhanguera":whereClause+="(idMarca='".concat(brandId,"' OR idMarca='16')")+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL')";break;case"uniderp":whereClause+="(idMarca='".concat(brandId,"' AND idUnidade='789')")+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL')";break;default:whereClause+="(idMarca='".concat(brandId,"' OR (idMarca='1' AND idModalidade != 'PRESENCIAL') OR (idMarca='19' AND idModalidade != 'PRESENCIAL') )")}}var url=window.storeConfig.middleware.url+"/ofertas/localidades/"+whereClause;var currentLocations=window.storeHelpers.generic.getCacheDataFromKey(url);if(currentLocations){setTimeout((function(){AdvancedSearch.loadLocationsSuccess(currentLocations)}),100)}else{$.ajax({url:encodeURI(url),type:"GET",dataType:"json",success:function success(result){window.storeHelpers.generic.setCacheData(url,result);AdvancedSearch.loadLocationsSuccess(result)},error:function error(e){$('.MZadvancedSearch--select select[name="location"]').val("Erro ao buscar localizações");console.error("Error while getting locations >",e);AdvancedSearch.isLoading=false}})}},loadLocationsSuccess:function loadLocationsSuccess(result){$('.MZadvancedSearch--select select[name="location"]').empty().trigger("change");$('.MZadvancedSearch--select select[name="location"]').select2({placeholder:"Estado ou Cidade",matcher:window.storeHelpers.select2.matchStart,data:[{text:"Código UF",children:window.storeHelpers.select2.facetsToArray(result,"codUF")},{text:"Estado",children:window.storeHelpers.select2.facetsToArray(result,"nomeUF")},{text:"Cidade",children:window.storeHelpers.select2.facetsToArray(result,"cidade")}]});$('.MZadvancedSearch--select select[name="location"]').prop("disabled",false);AdvancedSearch.isLoading=false;$(window).trigger("mzSelectLocationLoaded",[]);$('.MZadvancedSearch--select select[name="location"]').parent().removeClass("mz-select-loading");$('.MZadvancedSearch--select select[name="location"]').select2("open")},onSelectLocation:function onSelectLocation(event){AdvancedSearch.isLoading=true;var locationName=event.params.data.text;var locationType=event.params.data.id.split("---")[0];var whereClause="whereClause=";if(!$.cookie("marcaOrigem")){whereClause+="(".concat(locationType,'="').concat(locationName,'")')}else{var brandId=AdvancedSearch.getBrandIdFromName($.cookie("marcaOrigem"));switch($.cookie("marcaOrigem")){case"unopar":whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,'")')+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL' AND ".concat(locationType,'="').concat(locationName,'")');break;case"lfg":whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,'")');break;case"anhanguera":whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,'") ')+" OR (idMarca='16' AND idModalidade != 'PRESENCIAL' AND ".concat(locationType,'="').concat(locationName,'")')+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL' AND ".concat(locationType,'="').concat(locationName,'")');break;case"uniderp":whereClause+="(idMarca='12' AND  ".concat(locationType,'="').concat(locationName,'")')+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL' AND ".concat(locationType,'="').concat(locationName,'")');break;default:whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,'")')+" OR (idMarca='1' AND idModalidade != 'PRESENCIAL' AND ".concat(locationType,'="').concat(locationName,'")')+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL' AND ".concat(locationType,'="').concat(locationName,'")')}}var url=window.storeConfig.middleware.url+"/ofertas/modalidades/?"+whereClause;var currentModalities=window.storeHelpers.generic.getCacheDataFromKey(url);if(currentModalities){AdvancedSearch.loadModalitiesSuccess(currentModalities,whereClause)}else{$.ajax({url:url,type:"GET",dataType:"json",success:function success(result){window.storeHelpers.generic.setCacheData(url,result);AdvancedSearch.loadModalitiesSuccess(result,whereClause)},error:function error(e){$('.MZadvancedSearch--select select[name="modality"]').val("Erro ao buscar localizações");console.error("Error while getting modalities >",e);AdvancedSearch.isLoading=false}})}},loadModalitiesSuccess:function loadModalitiesSuccess(result,whereClause){$('.MZadvancedSearch--select select[name="modality"]').empty().trigger("change");$('.MZadvancedSearch--select select[name="course"]').empty().trigger("change");$('.MZadvancedSearch--select select[name="course"]').prop("disabled",true);$('.MZadvancedSearch--select select[name="modality"]').prop("disabled",true);$('.MZadvancedSearch--select select[name="modality"]').select2({placeholder:"Todas as Modalidades",minimumResultsForSearch:-1,data:window.storeHelpers.select2.facetsToArray(result,"idModalidade").map((function(item){if(~window.location.search.indexOf("superbusca")){switch(item.text){case"SUPERINTENSIVO":return"EAD 4 MESES";case"INTENSIVO":return"EAD 6 MESES";case"EAD":return"EAD 10 MESES";case"SEMI_PRESENCIAL":return"SEMIPRESENCIAL";case"PRESENCIAL":return"PRESENCIAL";default:return item.text}}switch(item.text){case"SUPERINTENSIVO":return"EAD 4 MESES";case"INTENSIVO":return"EAD 6 MESES";case"EAD":return"EAD 10 MESES";case"SEMI_PRESENCIAL":return"SEMIPRESENCIAL";case"PRESENCIAL":return"PRESENCIAL";default:return item.text}}))});$('.MZadvancedSearch--select select[name="modality"]').prop("disabled",false);AdvancedSearch.isLoading=false;AdvancedSearch.getCourses(whereClause)},onSelectModality:function onSelectModality(event){var typeCourseName=sessionStorage.getItem("typeCourseName");AdvancedSearch.isLoading=true;var modality=AdvancedSearch.getModalityLabel(event.params.data.text);var locationName=$('.MZadvancedSearch--select select[name="location"]').select2("data")[0].text;var locationType=$('.MZadvancedSearch--select select[name="location"]').select2("data")[0].id.split("---")[0];var whereClause="whereClause=";if(!$.cookie("marcaOrigem")){whereClause+="(".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND tipoCurso='").concat(typeCourseName,"' )")}else{var brandId=AdvancedSearch.getBrandIdFromName($.cookie("marcaOrigem"));switch($.cookie("marcaOrigem")){case"unopar":whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND tipoCurso='").concat(typeCourseName,"')")+" OR (idMarca='19' AND ".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND idModalidade != 'PRESENCIAL' AND tipoCurso='").concat(typeCourseName,"')");break;case"lfg":whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND tipoCurso='").concat(typeCourseName,"')");break;case"anhanguera":whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND tipoCurso='").concat(typeCourseName,"')")+" OR (idMarca='16' AND ".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND idModalidade != 'PRESENCIAL' AND tipoCurso='").concat(typeCourseName,"')")+" OR (idMarca='19' AND ".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND idModalidade != 'PRESENCIAL' AND tipoCurso='").concat(typeCourseName,"')");break;case"uniderp":whereClause+="(idMarca='12'  AND ".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"')")+" OR (idMarca='19' AND ".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND idModalidade != 'PRESENCIAL')");break;default:whereClause+="(idMarca='".concat(brandId,"' AND ").concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"')")+" OR (idMarca='1' AND ".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND idModalidade != 'PRESENCIAL')")+" OR (idMarca='19' AND ".concat(locationType,'="').concat(locationName,"\" AND idModalidade = '").concat(modality,"' AND idModalidade != 'PRESENCIAL')")}}AdvancedSearch.getCourses(whereClause)},getCourses:function getCourses(whereClause){AdvancedSearch.isLoading=true;var url=window.storeConfig.middleware.url+"/ofertas/cursos/?"+whereClause;console.log("url");console.log(url);var currentCourses=window.storeHelpers.generic.getCacheDataFromKey(url);if(currentCourses){AdvancedSearch.getCoursesSuccess(currentCourses)}else{$.ajax({url:url,type:"GET",dataType:"json",success:function success(result){window.storeHelpers.generic.setCacheData(url,result);AdvancedSearch.getCoursesSuccess(result)},error:function error(e){$('.MZadvancedSearch--select select[name="course"]').val("Erro ao buscar localizações");console.error("Error while getting courses >",e);AdvancedSearch.isLoading=false}})}},getCoursesExtension:function getCoursesExtension(){AdvancedSearch.isLoading=true;var url='//middleware.platosedu.io/api/v1/ofertas/cursos/?whereClause=(idModalidade = "EAD" AND tipoCurso="EXTENSAO")';var currentCourses=window.storeHelpers.generic.getCacheDataFromKey(url);if(currentCourses){AdvancedSearch.getCoursesSuccess(currentCourses)}else{$.ajax({url:url,type:"GET",dataType:"json",success:function success(result){window.storeHelpers.generic.setCacheData(url,result);AdvancedSearch.getCoursesSuccess(result)},error:function error(e){$('.MZadvancedSearch--select select[name="course"]').val("Erro ao buscar localizações");console.error("Error while getting courses >",e);AdvancedSearch.isLoading=false}})}},getCoursesSuccess:function getCoursesSuccess(result){$('.MZadvancedSearch--select select[name="course"]').empty().trigger("change");$('.MZadvancedSearch--select select[name="course"]').prop("disabled",true);$('.MZadvancedSearch--select select[name="course"]').select2({placeholder:"Todos os Cursos",matcher:window.storeHelpers.select2.matchCustom,data:window.storeHelpers.select2.facetsToArray(result,"nomeCurso")});$('.MZadvancedSearch--select select[name="course"]').removeClass("loading");$('.MZadvancedSearch--select select[name="course"]').prop("disabled",false);AdvancedSearch.isLoading=false},getSpecificationParamByName:function getSpecificationParamByName(name){var productFields=window.storeConfig.productFields;if(productFields[name.toLowerCase()]){return"specificationFilter_"+productFields[name.toLowerCase()]}else{console.error("Unrecognized productFields name");return name}},getRedirectUrl:function getRedirectUrl(locationType,locationName,modality,course,typeCourse){var paths=[];var mapParams=[];var url="";paths.push("cursos");mapParams.push("c");if(typeCourse=="EXTENSAO"){}else if($("body").hasClass("marca-lfg")){paths.push("lfg");mapParams.push("b")}if(typeCourse){paths.push(typeCourse);mapParams.push("specificationFilter_"+window.storeConfig.productFields["tipoCurso"])}if($("body").hasClass("extensao")){paths.push(locationName);mapParams.push(AdvancedSearch.getSpecificationParamByName(locationType))}if(modality){paths.push(modality);mapParams.push(AdvancedSearch.getSpecificationParamByName("Modalidade"))}if(course){paths.push(course);mapParams.push(AdvancedSearch.getSpecificationParamByName("Nome Curso"))}if($.cookie("marcaOrigem")&&!$("body").hasClass("marca-lfg")&&$.cookie("marcaOrigem")!=="anhanguera"&&$.cookie("marcaOrigem")!=="uniderp"){var collectionId="";var brand=$.cookie("marcaOrigem");if(window.linksMenuHeader[brand].isCustom){collectionId=window.linksMenuHeader[$.cookie("marcaOrigem")].colecao.split("?O=")[0]}else{collectionId=window.linksMenuHeader[$.cookie("marcaOrigem")].split("?O=")[0]}paths.push(collectionId);mapParams.push("productClusterSearchableIds")}url=paths.join("/")+"/?map="+mapParams.join(",");url+="&homeSearch=true";url+="&O=OrderByNameASC";console.log(url);return url},redirect:function redirect(url){if($("body").hasClass("marca")){$.ajax({url:encodeURI("/api/catalog_system/pub/products/search/"+url),type:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},complete:function complete(jqXHR,textStatus){var data=JSON.parse(jqXHR.responseText);if(data.length==1&&textStatus=="success"){window.location=encodeURI(location.origin+"/"+data[0].linkText+"/p")}else{window.location=encodeURI(location.origin+"/"+url)}}})}else{window.location=encodeURI(location.origin+"/"+url)}},onSubmit:function onSubmit(){if($('.MZadvancedSearch select[name="location"]').select2("data")[0].text){var locationName=$('.MZadvancedSearch select[name="location"]').select2("data")[0].text}else{var locationName=" "}if($('.MZadvancedSearch select[name="location"]').select2("data")[0].id.split("---")[0]){var locationType=$('.MZadvancedSearch select[name="location"]').select2("data")[0].id.split("---")[0]}else{var locationType="codUF"}if(AdvancedSearch.getVTEXModality($('.MZadvancedSearch select[name="modality"]').select2("data")[0].text)){var modality=AdvancedSearch.getVTEXModality($('.MZadvancedSearch select[name="modality"]').select2("data")[0].text)}if($('.MZadvancedSearch select[name="typeCourse"]').select2("data")[0].text=="Cursos Livres"){}else{}var course=$('.MZadvancedSearch select[name="course"]').select2("data")[0].text;var typeCourse=sessionStorage.getItem("typeCourseName");try{window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"generic",category:"Formulario",action:"formularioBuscaHome",label:[{tipoLocalidade:locationType,localidade:locationName,modalidade:modality,curso:course,tipoCurso:typeCourse}]});window.dataLayer.push({formularioBuscaHome:[{tipoLocalidade:locationType,localidade:locationName,modalidade:modality,curso:course,tipoCurso:typeCourse}]})}catch(e){console.log("Push dataLayer error")}var url=AdvancedSearch.getRedirectUrl(locationType,locationName,modality,course,typeCourse);window.storeHelpers.generic.setSearchLocation(locationType,locationName);window.storeHelpers.generic.setAdvancedSearchResult(locationName,modality||"Todas as modalidades",course||"Todas os cursos");AdvancedSearch.redirect(url)},data:{isLoading:false}};$(window).load(AdvancedSearch.init)}catch(e){console.log("Erro na instancia [AdvancedSearch]: ",e)}})();