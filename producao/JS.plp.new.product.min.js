/* DESKTOP-G9RC0RK - 18/11/2020 17:50:26 GMT */
"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function mz_number_format(n,t,e,i){n=(n+"").replace(/[^0-9+\-Ee.]/g,""),n=isFinite(+n)?+n:0,i=void 0===i?",":i,e=void 0===e?".":e;var r="";r=function r(n,t){var e=Math.pow(10,t);return""+(Math.round(n*e)/e).toFixed(t)};return 3<(r=((t=isFinite(+t)?Math.abs(t):0)?r(n,t):""+Math.round(n)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=Array(t-r[1].length+1).join("0")),r.join(e)}(function(){try{var Product={init:function init(){Product.bringAllData();Product.applyShareActions();Product.applyAccordions();Product.applyEbookModal();Product.setBrandImage();Product.openInstallments();Product.getTeachers();Product.chooseFirstTimeLocationUnit();Product.changeLocationUnit();Product.applyLinkToGoogleMaps();Product.applyUnitTour();Product.getCourseDetail();Product.callDataUnit();Product.addProductInCheckout();Product.addEbookInCheckout();Product.toggleEbook();Product.togglePodcast();Product.toggleVideo();Product.submitEbookForm();Product.consultorsButtons()},ready:function ready(){Product.applyMasks()},bgOverlay:"mz-mdlocation-on",dataAll:{dataProduct:"",dataEbook:"",dataUf:"",dataCity:"",idModalidade:"",dataUnitID:"",dataUnitPoloID:"",dataUnitBrandID:"",dataBrandID:"",dataBrandName:"",dataOfferID:"",dataOfferPlanPoloID:"",dataDetailsDuration:"",dataDetailsMeetings:"",dataConsultorID:"",dataUnitAddress:"",dataRegionID:"",dataCourseID:"",dataAffiliationID:"",dataInstallmentID:"",dataSkuNameInst:"",dataMestreIndica:"",selectedPaymentValue:"",dataAdress:{address:"",city:"",complement:"",idCounty:"",name:"",number:"",tel:"",uf:""},dataVoucher:{code:"",name:""},orderData:""},libRegex:{eadWrong:/[0-9]{1,2} - [0-9]{1,2}\d\ meses/g,eadFormated:/[0-9]{1,2} - /g},applyShareActions:function applyShareActions(){$("#mz-share-button").on("click",function(){$(".mz-product__banner.to-share").slideToggle()})},applyAccordions:function applyAccordions(){$("#mz-about-course").on("click",function(){$("html, body").animate({scrollTop:$(".texts.about-course").offset().top-200},1e3)});$("#mz-subjects").on("click",function(){$("html, body").animate({scrollTop:$(".texts.subjects").offset().top-200},1e3)});$("#mz-certification").on("click",function(){$("html, body").animate({scrollTop:$(".texts.certification").offset().top-200},1e3)});$("#mz-modality").on("click",function(){$("html, body").animate({scrollTop:$(".texts.modality").offset().top-200},1e3)});$("#mz-mec").on("click",function(){$("html, body").animate({scrollTop:$(".texts.mec").offset().top-200},1e3)})},setBrandImage:function setBrandImage(){var brandCookie=$.cookie("marcaOrigem");if(brandCookie==undefined){$(".mz-product__brand").addClass("brand-platos")}else{var nameImage="portalpos-logo-".concat(brandCookie,"-dark");var urlImage="https://portalpos2.vteximg.com.br/arquivos/".concat(nameImage,".png");$(".mz-product__brand img").attr("src",urlImage)}},bringAllData:function bringAllData(){var productUrl=window.location.pathname;$.ajax({type:"GET",method:"GET",url:"/api/catalog_system/pub/products/search".concat(productUrl),dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(dataSku){Product.dataAll.dataProduct=dataSku[0];var headingOne=dataSku[0]["Nome Curso"][0];var fullBanner=dataSku[0].items[0].images[1].imageUrl;var modality=dataSku[0]["Modalidade"][0];var duration=dataSku[0]["Duração"][0];var initCourse=dataSku[0]["Previsão de início"][0];var area=dataSku[0]["Área de Estudo"][0];Product.dataAll.dataBrandID=Product.dataAll.dataProduct.brandId;Product.dataAll.dataBrandName=Product.dataAll.dataProduct.brand;window.thisCourseModality=dataSku[0]["Modalidade"][0];$(window).trigger("mzModalityLoaded",modality);if(duration.match(Product.libRegex.eadWrong)){duration=duration.replace(Product.libRegex.eadFormated,"")}$(".mz-product__infos h1").text(headingOne);$(".mz-product-extrainfo__titlespan").text(headingOne);$("#mz-main-banner").attr("src",fullBanner);$("#mz-main-banner").show("fast");$(".infos.modality").text(modality);$(".infos.duration").text(duration);$(".infos.course").text(initCourse);$(".infos.area").text(area);Product.buildTextContent(dataSku);if(window.location.search&&window.location.search.indexOf("homeSearch")>-1){Product.getLocationByHomeSearch()}else{Product.getLocationByLocalStorage();$(window).on("MZ.geolocationSelected",Product.getLocationByLocalStorage)}Product.applyEbookInfos()})},buildTextContent:function buildTextContent(dataContent){if(dataContent[0]["Público Alvo"][0].length){$(".publico-alvo").next().text(dataContent[0]["Público Alvo"][0])}else{$(".publico-alvo").hide();$(".publico-alvo").next().hide()}if(dataContent[0].description.length){var objetivosGerais=null;var objetivosEspecificos=null;if(dataContent[0].description.match("Objetivos Gerais")||dataContent[0].description.match("Objetivos Específicos")){objetivosGerais=dataContent[0].description.split("Objetivos Específicos")[0];objetivosEspecificos=dataContent[0].description.split("Objetivos Específicos")[1];objetivosGerais=objetivosGerais.trim();if(objetivosGerais.match(/·\s|\•/g)){objetivosGerais=objetivosGerais.replace(/·\s|\•/g,"")}objetivosEspecificos=objetivosEspecificos.trim().split(/·\s|•\s|\n/g)}if(objetivosGerais!=null&&objetivosGerais!=""){objetivosGerais=objetivosGerais.replace(/Objetivos Gerais/g,"");$(".objetivos-gerais").next().text(objetivosGerais);$(".objetivos-gerais").show("fast");$(".objetivos-gerais").next().show("fast")}else{$(".objetivos-gerais").hide();$(".objetivos-gerais").next().hide()}if(objetivosEspecificos!=null&&objetivosEspecificos!=""){var newObjectives=[];objetivosEspecificos.forEach(function(item){if(item!=""){newObjectives.push(item.replace(/\.|\;/g,""))}});newObjectives.map(function(descItem){var formatedText=_?_.capitalize(descItem.trim()):descItem.trim();if(formatedText!=""){var liText="<li>".concat(formatedText,".</li>");$(".objetivos-especificos").next().append(liText)}$(".objetivos-especificos").show("fast");$(".objetivos-especificos").next().show("fast")})}else{$(".objetivos-especificos").hide();$(".objetivos-especificos").next().hide()}}else{$(".objetivos-gerais, .objetivos-especificos").hide();$(".objetivos-gerais, .objetivos-especificos").next().hide()}if(dataContent[0]["Certificação"][0].length){Product.applyCertificationContent()}else{$(".texts.certification").hide();$("#mz-certification").parent().hide()}if(dataContent[0]["Modalidade"][0].length){if(dataContent[0]["Modalidade"][0]==="EAD - 10 meses"||dataContent[0]["Modalidade"][0]==="EAD - 6 meses"){var text='\n                            <h3>Conheça seu Curso:</h3> <br>\n                            <div class="text-ead">\n                                <b>Cursos a distância (online):</b> \n                                <span>Os cursos a distância são ideais para você que valoriza a mobilidade e a flexibilidade quanto aos seus horários de estudo, no seu ritmo de aprendizagem.</span>\n                            </div>\n                            <div class="text-ead">Você estuda 100% online e a carga horária do curso é de 360h em 9 disciplinas específicas (40h cada disciplina).</div>\n                            <div class="text-ead">A cada disciplina, você contará com leituras digitais, slides, videoaulas e podcasts preparados por professores de destaque na área, que aliam conhecimentos teóricos e discussões sobre a prática profissional, como aprendizagem em foco. Além disso, você também terá o Desafio Profissional e atividades avaliativas que o ajudarão ainda mais a colocar em prática todo o aprendizado.</div>\n                            <div class="text-ead">Você contará também com o acompanhamento de um tutor para auxiliá-lo nas dúvidas que surgirem durante seu curso.</div>\n                            <div class="text-ead">A certificação de um curso EAD é igual ao do curso presencial.</div> <br/>\n                            <strong>Diferenciais da Pós-Graduação EAD</strong><br/>\n                            <ul>\n                                <li>- LMS exclusivo – Kosmos (todos os serviços em uma única plataforma)</li>\n                                <li>- Canal Conecta</li>\n                                <li>- Biblioteca Virtual</li>\n                                <li>- Cursos Livres gratuitos</li>\n                                <li>- Disciplina ambientação</li>\n                                <li>- Tutoria – atendimento em até 24h (média de 10h)</li>\n                                <li>- Material Didático e Videoaula exclusivos e com diversos objetos de aprendizagem</li>\n                                <li>- O aluno comparece ao polo apenas para o encontro de ambientação ao curso</li>\n                                <li>- Correção automática da Avaliação Virtual – nota imediata no Boletim do aluno</li>\n                                <li>- Duração em 10 ou 6 meses</li>\n                                <li>- Inscrição, matrícula e upload da documentação online</li>\n                                <li>- Flexibilidade de lugar e de horário para assistir as aulas</li>\n                            </ul>\n                        ';$(".modality.descriptions").append(text)}if(dataContent[0]["Modalidade"][0]==="Semi-presencial"){var _text="<h3>Conheça seu Curso: </h3><p><b>Cursos Semipresenciais:</b> reúne o melhor das duas modalidades, com a flexibilidade do ensino à distância e do presencial. Do ensino a distância, você tem a possibilidade de estudar, no seu próprio ritmo de aprendizagem onde, quando e como quiser, com conteúdo e atividades preparados por professores de destaque na área e acompanhado por um tutor. Do ensino presencial, você ampliará sua rede de relacionamento com colegas e professores e discutirá estudos de caso ou simulados, orientados por um professor.</p>";$(".modality.descriptions").append(_text)}if(dataContent[0]["Modalidade"][0]==="Presencial"){var _text2="<h3>Conheça seu Curso: </h3><p><b>Curso presencial:</b> é o modelo ideal para você que valoriza o networking e a interação face a face com professores e colegas, bem como a rotina e as vivências da sala de aula. Os conteúdos dos cursos são cuidadosamente planejados para tratar dos temas mais relevantes da área, aliando conhecimentos teóricos e discussões sobre a prática e o cotidiano profissional.</p><p>O aluno também cumpre uma parte de sua grade disciplinar por meio de carga horária online, respeitando normas regulatórias do MEC. Essas disciplinas irão prepará-lo ainda mais para a realidade do mercado de trabalho. Além disso, você terá mais flexibilidade para conciliar os estudos a sua rotina, além de ter esse conteúdo disponível a qualquer momento*.</p>";$(".modality.descriptions").append(_text2)}}else{$("#mz-modality, .texts.modality").hide()}},getLocationByHomeSearch:function getLocationByHomeSearch(){var _window$storeHelpers$=window.storeHelpers.generic.getSearchLocation(),locationType=_window$storeHelpers$.locationType,locationName=_window$storeHelpers$.locationName;var selectedUF;var selectedCity;if(!locationType||!locationName){Product.getLocationByLocalStorage();$(window).off("MZ.geolocationSelected").on("MZ.geolocationSelected",Product.getLocationByLocalStorage);return}var prevSelectedUf="";var prevSelectedCity="";if(locationType==="codUF"){prevSelectedUf=locationName}if(locationType.toLowerCase()==="cidade"){prevSelectedCity=locationName.split("-")[0].trim();prevSelectedUf=locationName.split("-")[1]}if(locationType==="nomeUF"||locationType.toLowerCase()==="estado"){prevSelectedUf=Product.ufs[locationName]||""}selectedUF=prevSelectedUf;selectedCity=prevSelectedCity;if(!selectedUF&&!selectedCity){Product.getLocationByLocalStorage();$(window).off("MZ.geolocationSelected").on("MZ.geolocationSelected",Product.getLocationByLocalStorage);return}var estado=selectedUF;var cidade=selectedCity;var nomeCurso=Product.dataAll.dataProduct["Nome Curso"][0];var marca=Product.dataAll.dataProduct.brandId;var modalidade=Product.getModality(Product.dataAll.dataProduct["Modalidade"][0]);var whereClause="?whereClause=(nomeCurso='".concat(nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"')");if($.cookie("marcaOrigem")==="uniderp"){whereClause="?whereClause=(nomeCurso='".concat(nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"' AND idUnidade='789')")}Product.dataAll.dataUf=estado;Product.getLocation(estado,cidade,nomeCurso,marca,modalidade,whereClause)},getLocationByLocalStorage:function getLocationByLocalStorage(){if(localStorage&&localStorage.mzGeoInfo&&localStorage.mzGeoInfo.length){var locationSeted=JSON.parse(localStorage.mzGeoInfo);var estado=locationSeted.uf;var cidade=null;var nomeCurso=Product.dataAll.dataProduct["Nome Curso"][0];var marca=Product.dataAll.dataProduct.brandId;var modalidade=Product.getModality(Product.dataAll.dataProduct["Modalidade"][0]);var whereClause="?whereClause=(nomeCurso='".concat(nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"')");if($.cookie("marcaOrigem")==="uniderp"){whereClause="?whereClause=(nomeCurso='".concat(nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"' AND idUnidade='789')")}Product.dataAll.dataUf=estado;Product.getLocation(estado,cidade,nomeCurso,marca,modalidade,whereClause)}else{console.log("Não achei!")}},getLocation:function getLocation(estado,cidade,nomeCurso,marca,modalidade,whereClause){var selectCity=$("#mz-modal-select-city");var selectUnit=$("#mz-modal-select-unit");var options;try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/localidades/".concat(whereClause),type:"GET",dataType:"json",success:function success(cityResposne){selectCity.empty();selectUnit.empty();if(cityResposne[2].facets.length==0){$(document.body).addClass("modal-geolocal-open");$(".mz-geolocation__modal").addClass("modal-pos-visible");$(".mz-geolocation__modal--select").addClass("error");return}var thisUF="-".concat(Product.dataAll.dataUf);var thisRegex=new RegExp("".concat(thisUF));selectCity.append('<option selected="true" value="">Selecione uma cidade</option>');for(var city in cityResposne[2].facets){city=city.replace(thisRegex,"");options='<option value="'.concat(city,'">').concat(city,"</option>");selectCity.append(options)}$(document.body).addClass("mz-mdlocation-on")}}).done(function(){selectCity.on("change",function(){var $t=$(this);var thisCity=$t.val();if(thisCity!="Selecione uma cidade"){$(".select-city-error").hide("fast")}var params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado);if($.cookie("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado,"&idUnidade=789")}if(~window.location.search.indexOf("superbusca")){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado);if($.cookie("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado,"&idUnidade=789")}}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/unidades".concat(params),type:"GET",dataType:"json",success:function success(unitsResponse){selectUnit.html("");if(unitsResponse.length>1){selectUnit.append('<option selected="true" value="">Selecione uma unidade/polo</option>');unitsResponse.forEach(function(unit){options='<option data-id-course="'.concat(unit.idCurso,'" data-id-affiliation="').concat(unit.afiliacao,'" data-id-offer=').concat(unit.idOfertaPolo,' data-id-unit="').concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOferta,'" data-brand-unit-id-"').concat(unit.idMarca,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)})}else if(unitsResponse.length==1){unitsResponse.forEach(function(unit){options='<option data-id-course="'.concat(unit.idCurso,'" data-id-affiliation="').concat(unit.afiliacao,'" data-id-offer=').concat(unit.idOfertaPolo,' data-id-unit="').concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOferta,'" data-brand-unit-id-"').concat(unit.idMarca,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)});selectUnit.val(unitsResponse[0].nomeUnidade);$(".mz-product__modal.location button").removeAttr("disabled")}}});Product.dataAll.idModalidade=Product.getModality(Product.dataAll.dataProduct["Modalidade"][0]);Product.dataAll.dataUf=estado;Product.dataAll.dataCity=thisCity});selectUnit.on("change",function(){$(".mz-product__modal.location button").removeAttr("disabled")});if(cidade){selectCity.val(cidade);selectCity.trigger("change")}Product.applySelect2InSelects(selectCity,selectUnit);Product.applyAsideBox()})}catch(e){console.log("Erro: ",e.message)}},getTeachers:function getTeachers(){$(window).on("mzSetUnitConfirmed",function(evt,data){var thisId=Product.dataAll.dataOfferID;var cookie=$.cookie("TKOSMOS");var urlFormated=encodeURI("".concat(window.storeConfig.kosmos.url,"/vtex/pos/disciplinas/").concat(thisId,"?access_token=").concat(cookie));$.ajax({type:"GET",method:"GET",url:urlFormated,dataType:"json"}).done(function(responseSubjects){var line="";var group="";if(responseSubjects.length){responseSubjects.forEach(function(item,ix){line="\n                                    <li ".concat(ix%2!=0?'class="striped"':"",'>\n                                        <div class="info-instructor">\n                                            <span class="info-name">').concat(item.nome,"</span>\n                                            ").concat(item.professor!=null?'\n                                            <div class="info-instructor-data">\n                                                <span>'.concat(item.professor.titulacao||"","</span>\n                                                <span>").concat(item.professor.nome||"",'</span>\n                                                <span class="resume">(<a href="').concat(item.professor.lattes||"",'" target="_blank">Ver currículo</a>)</span>\n                                            </div>'):"",'\n                                        </div>\n                                        <div class="info-time">\n                                            <span>').concat(item.cargaHoraria!=0?item.cargaHoraria+"h":"","</span>\n                                        </div>\n                                    </li>\n                                ");group=group+line});var listSubjects="\n                                <ul>".concat(group,'</ul>\n                                <h3>Trabalho de conclusão de curso:</h3> \n                                <p class="striped">De acordo com a Resolução de abril de 2018, emitida pelo Conselho Nacional de Educação (CNE), o trabalho de conclusão de curso (TCC) não é mais requisito obrigatório para certificação de especialização, com exceção de alguns cursos da área da saúde e engenharia em que o conselho de classe determina.</p>\n                            ');$(".subjects.descriptions").html(listSubjects);$(".texts.subjects").show("fast")}})})},applyCertificationContent:function applyCertificationContent(){$(window).on("mzSetedUnitData",function(evt,data){var certificationText="";var certificacaoLFG=function certificacaoLFG(){if(Product.dataAll.dataUnitBrandID==16||Product.dataAll.dataUnitBrandID==12||Product.dataAll.dataUnitBrandID==19){$(".certification.descriptions").html("<p>A certificação na modalidade EaD têm a mesma validade que um curso presencial. Os cursos de Pós-Graduação a distância são certificados pela Faculdade Anhanguera-Uniderp.</p>")}if(Product.dataAll.dataUnitBrandID==1||Product.dataAll.dataUnitBrandID==4||Product.dataAll.dataUnitBrandID==5||Product.dataAll.dataUnitBrandID==7||Product.dataAll.dataUnitBrandID==8){$(".certification.descriptions").html("<p>A certificação na modalidade EaD têm a mesma validade que um curso presencial. Os cursos de Pós-Graduação a distância são certificados pela Universidade Pitágoras Unopar.</p>")}$(".texts.certification").removeAttr("style")};if(Product.dataAll.dataBrandName==="LFG"){return certificacaoLFG()}if(Product.dataAll.dataProduct["Modalidade"][0]==="EAD - 10 meses"||Product.dataAll.dataProduct["Modalidade"][0]==="EAD - 6 meses"){certificationText="A certificação na modalidade EaD têm a mesma validade que um curso presencial. Os cursos de Pós-Graduação a distância são certificados pela ";$(".certification.descriptions").html("<p>".concat(certificationText,"</p>"))}else if(Product.dataAll.dataProduct["Modalidade"][0]==="Semi-presencial"){certificationText="A certificação na modalidade semipresencial têm a mesma validade que um curso presencial. Os cursos de Pós-Graduação semipresencial são certificados pela ";$(".certification.descriptions").html("<p>".concat(certificationText,"</p>"))}else{certificationText="Os cursos de Pós-Graduação presencial são certificados pela "+Product.dataAll.dataBrandName;$(".certification.descriptions").html("<p>".concat(certificationText,"</p>"))}if((Product.dataAll.dataProduct["Modalidade"][0]==="EAD - 10 meses"||Product.dataAll.dataProduct["Modalidade"][0]==="EAD - 6 meses")&&(Product.dataAll.dataBrandName==="Anhanguera"||Product.dataAll.dataBrandName==="Uniderp")){certificationText+="Faculdade Anhanguera-Uniderp.";$(".certification.descriptions").html("<p>".concat(certificationText,"</p>"))}else if(Product.dataAll.dataProduct["Modalidade"][0]==="EAD - 10 meses"||Product.dataAll.dataProduct["Modalidade"][0]==="EAD - 6 meses"){certificationText+="Universidade Pitágoras Unopar.";$(".certification.descriptions").html("<p>".concat(certificationText,"</p>"))}if(Product.dataAll.dataProduct["Modalidade"][0]==="Semi-presencial"&&(Product.dataAll.dataBrandName==="Anhanguera"||Product.dataAll.dataBrandName==="Uniderp")){certificationText+="Faculdade Anhanguera-Uniderp.";$(".certification.descriptions").html("<p>".concat(certificationText,"</p>"))}else if(Product.dataAll.dataProduct["Modalidade"][0]==="Semi-presencial"){certificationText+="Universidade Pitágoras Unopar.";$(".certification.descriptions").html("<p>".concat(certificationText,"</p>"))}$(".texts.certification").removeAttr("style")})},applyAsideBox:function applyAsideBox(){$("#mz-location-unity-confirm").on("click",function(e){e.preventDefault();var thisSelectedCity=$("select#mz-modal-select-city").find(":selected");var thisSelectedUnit=$("select#mz-modal-select-unit").find(":selected");if(thisSelectedCity.text()=="Selecione uma cidade"){$(".select-city-error").show("fast");return}else{$(".select-city-error").hide("fast")}if(thisSelectedUnit.text()=="Selecione uma unidade/polo"){$(".select-unit-error").show("fast");return}else{$(".select-unit-error").hide("fast")}var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");var unitSelectedOfferPlanID=$("#mz-modal-select-unit").find(":selected").attr("data-id-offer");var unitSelectedCourseID=$("#mz-modal-select-unit").find(":selected").attr("data-id-course");var unitSelectedAffiliatonID=$("#mz-modal-select-unit").find(":selected").attr("data-id-affiliation");var unitSelectedOfferID=$("#mz-modal-select-unit").find(":selected").attr("data-id-polo");Product.dataAll.dataUnitID=unitSelected;Product.dataAll.dataOfferID=unitSelectedOfferID;Product.dataAll.dataOfferPlanPoloID=unitSelectedOfferPlanID;Product.dataAll.dataOfferPlanPoloID=parseInt(Product.dataAll.dataOfferPlanPoloID);Product.dataAll.dataCourseID=unitSelectedCourseID;Product.dataAll.dataAffiliationID=unitSelectedAffiliatonID;Product.applyInstallments();$(".payment.chose-unit").hide("fast");$(".payment.chose-unit .mz-loader").show();Product.getExtraInfo();try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}$(window).trigger("mzSetUnitConfirmed",response[0]);Product.dataAll.dataAdress.address=response[0].endereco;Product.dataAll.dataAdress.city=response[0].cidade;Product.dataAll.dataAdress.complement=response[0].complemento;Product.dataAll.dataAdress.idCounty=response[0].id_municipio;Product.dataAll.dataAdress.name=response[0].nome;Product.dataAll.dataAdress.number=response[0].numero;Product.dataAll.dataAdress.tel=response[0].tel;Product.dataAll.dataAdress.uf=response[0].uf;var adress="".concat(Product.dataAll.dataAdress.address,", ").concat(Product.dataAll.dataAdress.number," - ").concat(Product.dataAll.dataAdress.city,"/").concat(Product.dataAll.dataAdress.uf);var phone="Telefone: ".concat(Product.dataAll.dataAdress.tel);$(".location.name-univercity").text(Product.dataAll.dataAdress.name);$(".location.address-univercity").text(adress);$(".location.phone").text(phone);$("#mz-not-consultor")[0].checked=false;$("#mz-yes-consultor")[0].checked=false;$(".payment.attendance div").hide();$(".mz-product__aside .mz-loader").hide("fast");$(".payment.location").show("fast");$(".payment.price").show("fast");$(".payment.ebook").show("fast");$("#mz-not-consultor").click();Product.applyShotsBF();Product.getConsultors();Product.voucherVerifyCampaign()})}catch(e){console.log("Erro na busca das informações unidade: ",e.message)}$(document.body).removeClass(Product.bgOverlay)})},getModality:function getModality(modalidade){switch(modalidade){case"EAD - 10 meses":return"EAD";case"Educação a distância":return"EAD";case"Semi-presencial":return"SEMI_PRESENCIAL";case"Presencial":return"PRESENCIAL";case"EAD - 6 meses":return"INTENSIVO"}},applySelect2InSelects:function applySelect2InSelects(selectCity,selectUnit){selectCity.select2({placeholder:"Selecione uma Cidade...",matcher:Product.select2.matchCustom,language:{noResults:function noResults(){return"Nenhuma cidade encontrada!"}},dropdownParent:selectCity.parent()});selectUnit.select2({placeholder:"Selecione uma Unidade...",matcher:Product.select2.matchCustom,language:{noResults:function noResults(){return"Nenhuma unidade encontrada!"}},dropdownParent:selectCity.parent()})},getConsultors:function getConsultors(){var selectConsultors=$("#mz-attendance-consultor");var options;try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/consultores",type:"POST",dataType:"json",data:'{"idUnidade":"'.concat(Product.dataAll.dataUnitID,'"}'),cache:true}).done(function(responseConsultor){if(!responseConsultor&&!responseConsultor.length){$(".payment.attendance").hide();return}selectConsultors.empty();selectConsultors.append('<option selected="true" value="">Selecione o consultor que te atendeu</option>');responseConsultor.consultores.forEach(function(item){options='<option value="'.concat(item.id,'">').concat(item.nome,"</option>");selectConsultors.append(options)});selectConsultors.select2({placeholder:"Selecione o consultor que te atendeu",language:{noResults:function noResults(){return"Nenhum consultor encontrado."}},dropdownParent:selectConsultors.parent()});$(".payment.attendance").show("fast")}).fail(function(e){if(e.status=="404"){$(".payment.attendance").hide();$(".payment.attendance div").hide();return}})}catch(e){console.log("Erro na request de consultores.")}},consultorsButtons:function consultorsButtons(){$("#mz-not-consultor").on("change",function(){$(".payment.attendance div").hide("fast")});$("#mz-yes-consultor").on("change",function(){$(".payment.attendance div").show("fast")})},applyInstallments:function applyInstallments(){var regexList=Product.regexList();var cookie=$.cookie("TKOSMOS");var urlFormated=encodeURI("".concat(window.storeConfig.kosmos.url,"/vtex/pos/inscricao/planos/ofertaPolo/").concat(Product.dataAll.dataOfferPlanPoloID,"?access_token=").concat(cookie));var listUl=$(".list-installments.installments");var agroupHtml="";var itemLi,onePayment;$.ajax({type:"GET",method:"GET",url:urlFormated,dataType:"json"}).done(function(response){var list=response;var largestInstallment;list=list.sort(function(a,b){return a.parcelas-b.parcelas});list.forEach(function(parc){var totalPrice=parc.parcelas*parc.valorParcela;totalPrice=mz_number_format(totalPrice,2,",",".");if(parc.parcelas>1){itemLi=' \n                            <li>\n                                <label for="inp_'.concat(parc.id,'" data-names-sku="').concat(parc.parcelas,"x de R$ ").concat(parc.valorParcela.replace(regexList.dot,","),'">\n                                    <input type="radio" id="inp_').concat(parc.id,'" data-parc-id="').concat(parc.id,'" data-parc="').concat(parc.parcelas,'" data-value="').concat(parc.valorParcela,'" data-sku="').concat(parc.valorPrimeiraParcela,'" name="inp_parc" />\n                                    ').concat(parc.parcelas,"x R$ ").concat(parc.valorParcela.replace(regexList.dot,","),'\n                                </label>\n                                <label id="valueTotal">R$ ').concat(totalPrice,"</label>\n                            </li>\n                            ");agroupHtml=agroupHtml+itemLi}else if(parc.parcelas==1){largestInstallment=list[list.length-1];var valueLargestInstallment=largestInstallment.valorParcela*largestInstallment.parcelas;$(".price.block-price .installment").text("".concat(largestInstallment.parcelas,"x"));$(".price.block-price .value").text("R$ ".concat(mz_number_format(largestInstallment.valorParcela,2,",",".")));var valueSaved=valueLargestInstallment-parc.valorParcela;if(parc.parcelas==1&&Product.dataAll.dataProduct.brand!=="LFG"){valueSaved="(economize até R$ ".concat(mz_number_format(valueSaved,2,",","."),")")}else if(parc.parcelas==1&&Product.dataAll.dataProduct.brand==="LFG"){valueSaved="(10% de desconto)"}onePayment=' \n                            <li>\n                                <label for="inp_'.concat(parc.id,'" class="one-payment-seted" data-names-sku="').concat(parc.parcelas,"x de R$ ").concat(parc.valorParcela.replace(regexList.dot,","),'">\n                                    <input type="radio" id="inp_').concat(parc.id,'" data-parc-id="').concat(parc.id,'" data-parc="').concat(parc.parcelas,'" data-value="').concat(parc.valorParcela,'" data-sku="').concat(parc.valorPrimeiraParcela,'" name="inp_parc" />\n                                    À vista - R$ ').concat(parc.valorParcela.replace(regexList.dot,","),'\n                                </label>\n                                <label id="valueTotal" class="one-payment">\n                                    R$ ').concat(totalPrice,'\n                                    <span class="value-economic">').concat(valueSaved,'</span>\n                                </label>\n                                <span style="display:none;" id="one-payment-formated">R$ ').concat(parc.valorParcela.replace(regexList.dot,","),"</span>\n                            </li>\n                            ")}});agroupHtml=agroupHtml+onePayment;listUl.html(agroupHtml);if(largestInstallment){$('input[name="inp_parc"][data-parc="'.concat(largestInstallment.parcelas,'"]')).click()}$(".mz-product__modal.payment .mz-loader").hide("fast");window.countChanged++})},openInstallments:function openInstallments(){$("#mz-price-installements").on("click",function(){$(document.body).addClass("mz-mdpayment-on");$(".mz-product__modal.payment .mz-loader").show("fast")});$(document).on("click",".list-installments.installments label[for]",function(){$(".list-installments.installments label[for]").removeClass("ativo");$(this).addClass("ativo");$(".price.first-text").text("Opção de parcelamento escolhida:");if($(this).is(".one-payment-seted")){var value=$("#one-payment-formated").text();$(".price.block-price .installment").text("À vista -");$(".price.block-price .value").text(value)}else{var installment=$(this).find("input").attr("data-parc");var _value=$(this).find("input").attr("data-value");installment="".concat(installment,"x");_value="R$ ".concat(mz_number_format(_value,2,",","."));$(".price.block-price .installment").text(installment);$(".price.block-price .value").text(_value)}setTimeout(function(){$(document.body).removeClass("mz-mdpayment-on")},1e3)});var buttonsClose=$(".mz-product__modal.payment .mz-modal__close button, .mz-bgoverlay");buttonsClose.on("click",function(){$(document.body).removeClass("mz-mdpayment-on")})},applyEbookInfos:function applyEbookInfos(){var codCurso=Product.dataAll.dataProduct["Código Curso"];var modalidade=Product.dataAll.dataProduct["Modalidade"];var ebookSpecificationFilterId=window.storeConfig.ebookSpecificationFilterId;var ebookSalesChannel=window.storeConfig.ebookSalesChannel;var urlTarget="/api/catalog_system/pub/products/search/"+codCurso+"/?map=specificationFilter_"+ebookSpecificationFilterId+"&sc="+ebookSalesChannel;if(modalidade=="EAD - 10 meses"||modalidade=="EAD - 6 meses"){$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(response){if(!response||!response.length){$(".payment.ebook").addClass("hide-book");return}Product.dataAll.dataEbook=response[0];var price=mz_number_format(response[0].items[0].sellers[0].commertialOffer.Price,2,",",".");$(".mz-modal.mz-product__modal.ebook .price").text(price);var name=Product.dataAll.dataProduct["Nome Curso"][0];name=name.split("|")[0];$(".mz-modal.mz-product__modal.ebook .name-course").text(name)})}},applyEbookModal:function applyEbookModal(){$("#mz-ebook-link").on("click",function(){$(document.body).addClass("mz-mdebook-on")});$(".mz-modal.mz-product__modal.ebook .mz-modal__close button, .mz-bgoverlay").on("click",function(){$(document.body).removeClass("mz-mdebook-on")})},chooseFirstTimeLocationUnit:function chooseFirstTimeLocationUnit(){var buttonUnit=$("#mz-chose-unit");buttonUnit.on("click",function(){$(document.body).addClass("mz-mdlocation-on")})},changeLocationUnit:function changeLocationUnit(){var buttonChangeUnit=$("#mz-location-change");buttonChangeUnit.on("click",function(){$(document.body).addClass("mz-mdlocation-on")});var buttonsClose=$(".mz-product__modal.location .mz-modal__close button, .mz-bgoverlay");buttonsClose.on("click",function(){$(document.body).removeClass("mz-mdlocation-on")})},getEbookAndPodcast:function getEbookAndPodcast(dataIdCourse){$.ajax({type:"GET",method:"GET",url:"https://www.portalpos.com.br/api/dataentities/adminprodinfo/search?idproduto=".concat(dataIdCourse,"&_schema=mz-body&an=portalpos2"),dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(response){if(!response||!response.length){console.log("Nenhum Podcast cadastrado a esse produto.");return}})},applyLinkToGoogleMaps:function applyLinkToGoogleMaps(){var linkMaps=$("#mz-location-maps");var link;$(window).on("mzSetUnitConfirmed",function(evt,data){link="http://maps.google.com/?q=".concat(data.endereco,",").concat(data.numero," - ").concat(data.cidade,"/").concat(data.uf);linkMaps.attr("href",link);linkMaps.attr("target","_blank")})},applyUnitTour:function applyUnitTour(){$(window).on("mzSetUnitConfirmed",function(){var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");$.ajax({url:"//api.vtex.com.br/portalpos2/dataentities/TT/search?unidadeid=".concat(unitSelected,"&_fields=unidadevideo"),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhuma Unidade de Tour recebida.");$(".location.tour").hide()}else{$(".location.tour").attr("href",response[0].unidadevideo)}})})},callDataUnit:function callDataUnit(){$(window).on("mzSetUnitConfirmed",function(){var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}Product.dataAll.dataUnitID=unitSelected;Product.dataAll.dataUnitBrandID=response[0].idMarca;Product.dataAll.dataAdress.address=response[0].endereco;Product.dataAll.dataAdress.city=response[0].cidade;Product.dataAll.dataAdress.complement=response[0].complemento;Product.dataAll.dataAdress.idCounty=response[0].id_municipio;Product.dataAll.dataAdress.name=response[0].nome;Product.dataAll.dataAdress.number=response[0].numero;Product.dataAll.dataAdress.tel=response[0].tel;Product.dataAll.dataAdress.uf=response[0].uf;$(window).trigger("mzSetedUnitData",response[0])})}catch(e){console.log("Erro na busca das informações unidade: ",e.message)}})},getCourseDetail:function getCourseDetail(){$(window).on("mzSetUnitConfirmed",function(){var params="?nomeCurso=".concat(Product.dataAll.dataProduct["Nome Curso"][0],"&codUF=").concat(Product.dataAll.dataUf,"&idModalidade=").concat(Product.dataAll.idModalidade,"&idMarca=").concat(Product.dataAll.dataBrandID,"&cidade=").concat(Product.dataAll.dataCity,"-").concat(Product.dataAll.dataUf,"&idUnidade=").concat(Product.dataAll.dataUnitID);if(~window.location.search.indexOf("superbusca")){params="?nomeCurso=".concat(Product.dataAll.dataProduct["Nome Curso"][0],"&codUF=").concat(Product.dataAll.dataUf,"&idModalidade=").concat(Product.dataAll.idModalidade,"&idMarca=").concat(Product.dataAll.dataBrandID,"&cidade=").concat(Product.dataAll.dataCity,"|").concat(Product.dataAll.dataUf,"&idUnidade=").concat(Product.dataAll.dataUnitID)}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/cursos/detalhes".concat(params),type:"GET"}).done(function(response){if(!response||!response.length){console.log("Nenhum dado retornado de: Detalhes de Curso.");return}Product.dataAll.dataDetailsMeetings=response[0].encontros;Product.dataAll.dataDetailsDuration=response[0].duracao})})},applyShotsBF:function applyShotsBF(){var regex=Product.regexList();var thisModality=Product.dataAll.dataProduct["Modalidade"][0];if(thisModality.match(regex.findEAD)){$(".price.block-flag").show("fast");$(".payment.fourth-text").removeAttr("style");$(".mz-product__aside.bf-texts").show("fast");$(".mz-product__aside.campaign.brands").show("fast")}else{$(".mz-product__aside.campaign.brands").hide()}},addProductInCheckout:function addProductInCheckout(){var buyButton=$("#mz-buy-button");var regexList=Product.regexList();buyButton.one("click",function(){$(".payment.chose-unit, .payment.location, .payment.voucher, .payment.price, .payment.ebook, .payment.attendance").slideUp("fast");$(".mz-loader").show("fast");$(".mz-loader span").show("fast");$(".mz-loader span").css({display:"block"});var idPolo=$("#mz-modal-select-unit").find(":selected").attr("data-id-offer");var cookie=$.cookie("TKOSMOS");var urlFormated=encodeURI("".concat(window.storeConfig.kosmos.url,"/vtex/pos/inscricao/planos/ofertaPolo/").concat(idPolo,"?access_token=").concat(cookie));$.ajax({type:"GET",method:"GET",url:urlFormated,dataType:"json"}).done(function(response){var firstInstallment=[];response.forEach(function(parc){firstInstallment.push(parc.parcelas)});firstInstallment=response.sort();firstInstallment=firstInstallment[0];var unidadeEndereco=Product.dataAll.dataAdress.address;if(Product.dataAll.dataAdress.number){unidadeEndereco+=", "+Product.dataAll.dataAdress.number}if(Product.dataAll.dataAdress.complement){unidadeEndereco+=" - "+Product.dataAll.dataAdress.complement}unidadeEndereco+=" - "+Product.dataAll.dataAdress.city+"/"+Product.dataAll.dataAdress.uf;Product.dataAll.dataUnitAddress=unidadeEndereco;Product.dataAll.dataRegionID=Product.dataAll.dataAdress.idCounty;var consultorSelected=$("#mz-attendance-consultor").find(":selected").attr("value");Product.dataAll.dataConsultorID=consultorSelected?consultorSelected||"-":"-";if(Product.dataAll.dataConsultorID!="-"){Product.dataAll.dataConsultorID=parseInt(Product.dataAll.dataConsultorID)}var valorParcela,valorParcelaOriginal,qtdParcelas,valorMatriculaPresencial,nameSku;var valorTotal=0;var parcelas=[];if(!$('input[name="inp_parc"]:checked').length){console.log("Parcela não selecionada");valorParcelaOriginal=firstInstallment.valorParcela;valorParcela=firstInstallment.valorParcela;valorParcela=valorParcela.replace(regexList.dot,"");valorParcela=valorParcela/100;qtdParcelas=firstInstallment.parcelas;valorMatriculaPresencial=valorParcela;Product.dataAll.selectedPaymentValue=valorMatriculaPresencial;Product.dataAll.selectedPaymentValue=valorParcelaOriginal.replace(regexList.dot,"");Product.dataAll.selectedPaymentValue=Product.dataAll.selectedPaymentValue.toString();valorTotal=valorParcela;nameSku="".concat(qtdParcelas,"x de R$ ").concat(valorParcelaOriginal.replace(regexList.dot,","));for(var i=1;i<=qtdParcelas;i++){parcelas.push({parcela:i,desconto:0,percentaul:0,valor:valorParcela,valorOriginal:valorParcela});valorTotal+=valorParcela}valorTotal=parseFloat(valorTotal);Product.dataAll.dataInstallmentID=firstInstallment.id;Product.dataAll.dataSkuNameInst=nameSku}else if($('input[name="inp_parc"]:checked').length){console.log("Parcela Selecionada");valorParcela=$('input[name="inp_parc"]:checked').attr("data-value");qtdParcelas=$('input[name="inp_parc"]:checked').attr("data-parc");valorMatriculaPresencial=$('input[name="inp_parc"]:checked').attr("data-sku");nameSku=$('input[name="inp_parc"]:checked').parent().attr("data-names-sku");Product.dataAll.selectedPaymentValue=valorMatriculaPresencial.replace(regexList.dot,"");Product.dataAll.dataInstallmentID=$('input[name="inp_parc"]:checked').attr("data-parc-id");Product.dataAll.dataSkuNameInst=nameSku;valorParcela=valorParcela.replace(regexList.dot,"");valorParcela=valorParcela/100;valorMatriculaPresencial=valorMatriculaPresencial.replace(regexList.dot,"");valorMatriculaPresencial=valorMatriculaPresencial/100;for(var i=1;i<=qtdParcelas;i++){parcelas.push({parcela:i,desconto:0,percentaul:0,valor:valorParcela,valorOriginal:valorParcela});valorTotal+=valorParcela}valorTotal=parseFloat(valorTotal)}switch(Product.dataAll.idModalidade.toLowerCase()){case"ead":case"intensivo":valorMatriculaPresencial:0;break}Product.dataAll.orderData=_objectSpread(_objectSpread({},window.storeHelpers.generic.getResetedOrderData()),{},{payment:{valorMatricula:valorMatriculaPresencial,valorTotal:valorTotal,valorMatriculaPresencial:valorMatriculaPresencial,valorSku:valorMatriculaPresencial,parcelas:parcelas},idOfertaPlano:Product.dataAll.dataInstallmentID,idModalidade:Product.dataAll.idModalidade,modalityVtexName:Product.dataAll.dataProduct["Modalidade"][0],nomesku:Product.dataAll.dataSkuNameInst,courseName:Product.dataAll.dataProduct["Nome Curso"][0],productId:Product.dataAll.dataProduct.productId,productArea:Product.dataAll.dataProduct["Área de Estudo"][0],brand:Product.dataAll.dataProduct.brand,brandId:Product.dataAll.dataProduct.brandId,regiao:Product.dataAll.dataRegionID,unidadeEndereco:Product.dataAll.dataUnitAddress,unidadeID:Product.dataAll.dataUnitID,unidadeNome:Product.dataAll.dataAdress.name.toLowerCase(),encontros:Product.dataAll.dataDetailsMeetings,duracao:Product.dataAll.dataDetailsDuration,consultor:Product.dataAll.dataConsultorID,courseUrl:"/".concat(Product.dataAll.dataProduct.linkText,"/p"),category:Product.dataAll.dataProduct.categories[0].replace(/^\/|\/$/g,""),categories:Product.dataAll.dataProduct.categories[0].replace(/^\/|\/$/g,"").split("/"),categoriesIds:Product.dataAll.dataProduct.categoriesIds[0].replace(/^\/|\/$/g,"").split("/"),vtexSkuId:Product.dataAll.dataProduct.items[0].itemId,vtexSkuName:Product.dataAll.dataProduct.items[0].nameComplete,vtexSkuPrice:Product.dataAll.dataProduct.items[0].sellers[0].commertialOffer.Price,vtexSkuVariant:Product.dataAll.dataProduct.items[0].name,vtexSellerId:Product.dataAll.dataProduct.items[0].sellers[0].sellerId});Product.dataAll.orderData.mestreIndica={codigo:Product.dataAll.dataVoucher.code||"-",professor:Product.dataAll.dataVoucher.name||"-"};localStorage.setItem("orderData",JSON.stringify(Product.dataAll.orderData));var _window$storeHelpers$2=window.storeHelpers.generic,clearCart=_window$storeHelpers$2.clearCart,addUtms=_window$storeHelpers$2.addUtms;clearCart().then(function(){addUtms().then(Product.addToCart)})})})},addToCart:function addToCart(){var item={id:Product.dataAll.dataProduct.items[0].itemId,quantity:1,seller:Product.dataAll.dataProduct.items[0].sellers[0].sellerId};vtexjs.checkout.addToCart([item],null,jssalesChannel).done(Product.changePrice)},changePrice:function changePrice(orderForm){$.ajax({url:"/api/checkout/pub/orderForm/"+orderForm.orderFormId+"/items/0/price",type:"PUT",headers:window.header,data:'{"price":'+Product.dataAll.selectedPaymentValue+"}",success:function success(data){},error:function error(data,statusText){console.warn("Erro na Mudança do Orderform")}}).done(function(data){Product.sendAttachment()});$(window).trigger("MZ.productAddedToCart",[])},sendAttachment:function sendAttachment(){var itemIndex=0;var attachment="Dados da compra";var attachmentContent={"Codigo da Afiliacao Cielo":Product.dataAll.dataAffiliationID,codigoMestreIndica:Product.dataAll.orderData.mestreIndica.codigo!==null?Product.dataAll.orderData.mestreIndica.codigo:"-",Consultor:Product.dataAll.dataConsultorID,"Endereço Unidade":Product.dataAll.dataUnitAddress,Ibge:"-","Id da Oferta":Product.dataAll.dataOfferID,"Id da OfertaPolo":Product.dataAll.dataOfferPlanPoloID.toString(),IsentaPrimeiroPagamento:false,Unidade:"Regiao: "+Product.dataAll.dataRegionID+" - Nome: "+Product.dataAll.dataAdress.name,"Id Unidade":Product.dataAll.dataUnitID,"Valor Inscrição":"ID: "+Product.dataAll.dataInstallmentID+" - "+Product.dataAll.dataSkuNameInst,Voucher:"-",idCurso:Product.dataAll.dataCourseID};$.removeCookie("Voucher");$.removeCookie("ValorVoucher");vtexjs.checkout.addItemAttachment(itemIndex,attachment,attachmentContent).then(function(){return vtexjs.checkout.sendAttachment("openTextField",{value:""})}).done(function(){window.location.href="/checkout/#/email"})},addEbookInCheckout:function addEbookInCheckout(){$("#mz-ebook-buybutton").one("click",function(){var orderData=_objectSpread(_objectSpread({},window.storeHelpers.generic.getResetedOrderData()),{},{isEbook:true,payment:{valorSku:Product.dataAll.dataEbook.items[0].sellers[0].commertialOffer.Price,valorTotal:Product.dataAll.dataEbook.items[0].sellers[0].commertialOffer.Price},courseName:Product.dataAll.dataEbook.productName,courseUrl:"/".concat(Product.dataAll.dataProduct.linkText,"/p"),ebookImg:Product.dataAll.dataEbook.items[0].images[0].imageUrl});localStorage.setItem("orderData",JSON.stringify(orderData));window.storeHelpers.generic.clearCart().then(function(){window.storeHelpers.generic.addUtms().then(Product.addEbookToCart())})})},addEbookToCart:function addEbookToCart(){var ebookSalesChannel=4;var item={id:Product.dataAll.dataEbook.items[0].itemId,quantity:1,seller:Product.dataAll.dataEbook.items[0].sellers[0].sellerId};vtexjs.checkout.getOrderForm().then(function(orderForm){vtexjs.checkout.addToCart([item],null,ebookSalesChannel).done(Product.addEbookUrl())})},addEbookUrl:function addEbookUrl(){var ebookUrl=Product.dataAll.dataEbook.ebookUrl[0];if(ebookUrl){vtexjs.checkout.getOrderForm().then(function(){return vtexjs.checkout.sendAttachment("openTextField",{value:ebookUrl})}).then(function(){window.location.href="/checkout/#/email"})}else{window.location.href="/checkout/#/email"}},getExtraInfo:function getExtraInfo(){$.ajax({type:"GET",url:"https://www.portalpos.com.br/api/dataentities/adminprodinfo/search?idproduto=".concat(Product.dataAll.dataCourseID,"&_schema=mz-body"),dataType:"json",headers:{accept:"application/json","REST-Range":"resources=0-1000","content-type":"application/json"}}).done(function(data){if(!data||!data.length){return}var currentData=data[0];$(".mz-product-extrainfo__block").hide();if(!currentData.imagem&&!currentData.ebook&&!currentData.ebookuniderp&&!currentData.video&&!currentData.podcast){return}var image=currentData.imagem;var video=currentData.video;var podcast=currentData.podcast;var ebookuniderp=currentData.ebookuniderp;var ebook=currentData.ebook;if(image){$(".mz-product-extrainfo__img").html('<img src="'.concat(image,'" />'));$(".mz-product-extrainfo__img").show()}if(video){$(".mz-product-video__modal--video-wrapper").html('<video class="mz-product-video__modal--video" controls src="'.concat(video,'"></video>'));$(".mz-product-extrainfo__video").show()}if(podcast){$(".mz-product-extrainfo__podcast-wrapper").html(podcast);$(".mz-product-extrainfo__podcast").show()}if($.cookie("marcaOrigem")=="uniderp"||$.cookie("marcaOrigem")=="anhanguera"){if(ebookuniderp){$(".mz-product-extrainfo__ebook").attr("data-ebook",ebookuniderp);$(".mz-product-extrainfo__ebook").show()}}else if(ebook){$(".mz-product-extrainfo__ebook").attr("data-ebook",ebook);$(".mz-product-extrainfo__ebook").show()}$(document.body).addClass("mz-ei-on")})},toggleVideo:function toggleVideo(){$(".mz-product-extrainfo__video").click(function(){$(".mz-product-video__modal").addClass("modal-pos-visible");$(document.body).addClass("mz-product-video-on");var currentVideo=$(".mz-product-video__modal--video")[0];if(!currentVideo){return}currentVideo.play()});$(".mz-product-video__modal--btnClose").click(function(){$(".mz-product-video__modal").removeClass("modal-pos-visible");$(document.body).removeClass("mz-product-video-on");var currentVideo=$(".mz-product-video__modal--video")[0];if(!currentVideo){return}currentVideo.pause()});$(".modal-pos-backdrop").click(function(){$(document.body).removeClass("mz-product-video-on");var currentVideo=$(".mz-product-video__modal--video")[0];if(!currentVideo){return}currentVideo.pause()})},toggleEbook:function toggleEbook(){$(".mz-product-extrainfo__ebook").click(function(){$(".mz-product-ebook__modal").addClass("modal-pos-visible");$(document.body).addClass("mz-product-ebook-on")});$(".mz-product-ebook__modal--btnClose").click(function(){$(".mz-product-ebook__modal").removeClass("modal-pos-visible");$(document.body).removeClass("mz-product-ebook-on")})},togglePodcast:function togglePodcast(){$(".mz-product-extrainfo__podcast").click(function(){$(".mz-product-extrainfo__podcast-wrapper").slideToggle()})},applyMasks:function applyMasks(){if(!$.fn.mask){return}var SPMaskBehavior=function SPMaskBehavior(val){return val.replace(/\D/g,"").length===11?"(00) 00000-0000":"(00) 0000-00009"};$('input[name="telefone"]').mask(SPMaskBehavior,{onKeyPress:function onKeyPress(val,e,field,options){field.mask(SPMaskBehavior.apply({},arguments),options)}})},submitEbookForm:function submitEbookForm(){if(!$.fn.validate){return}$(".mz-product-ebook__modal--form").validate({rules:{email:{required:true,email:true}},messages:{email:{required:"Preencha o e-mail",email:"E-mail inválido"},name:"Preencha o nome"},submitHandler:function submitHandler(form,event){event.preventDefault();var $form=$(form);var isValid=$form.valid();if(!isValid){return}var ebook=$(".mz-product-extrainfo__ebook").attr("data-ebook");var formData=$form.serializeObject();$.ajax({url:"/api/checkout/pub/postal-code/BRA/"+formData.cep,type:"GET",dataType:"json",success:function success(data){console.log("data",data);var mdData=_objectSpread(_objectSpread({},formData),{},{cidade:formData.city,estado:formData.state,bairro:formData.neighborhood,ebook:ebook,marca:$.cookie("marcaOrigem")||"PortalPos",url:window.location.hostname});Product.sendEbookMasterData(mdData)},error:function error(e){swal({icon:"error",text:"Erro ao enviar o formulário!"});console.log(e)}});window.storeHelpers.chaordic.updateUserEmail(formData.name,formData.email)},errorPlacement:function errorPlacement(error,element){element.closest(".mz-product-ebook__modal--form-group").append(error)}})},sendEbookMasterData:function sendEbookMasterData(mdData){$.ajax({url:"/api/dataentities/ebookdial/documents?_schema=mz-body&an="+window.storeConfig.accountName,type:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(mdData),complete:function complete(jqXHR,textStatus){var lead=Product.getCallCenterLead(mdData);if(lead.celular){window.storeHelpers.goodSale.senderLead(lead)}Product.formEbookSuccess(mdData.ebook)}})},getCallCenterLead:function getCallCenterLead(prmData){var orderForm=window.storeHelpers.generic.getOrderForm();var marca=window.storeHelpers.generic.getMarca();var lead={f_campoUnico:"email",f_fila:window.storeConfig.goodSale.idFila,f_atualizaRegistro:true,f_campanhaTelemarketing:window.storeConfig.goodSale.idCampanhaCataLead,f_cadastraOrigem:true,origem:"PortalPos",f_cadastraCategoria:true,categoria:"Cataleads",f_cadastraTipo:true,tipo:"Lead",nome:prmData.nome,email:prmData.email,celular:window.storeHelpers.goodSale.normalizeTel(prmData.telefone),observacoes:"Página: "+window.location.href+"\nMarca Site: "+marca+" \nCatalead: Ebook Baixar\nE-book: "+prmData.ebook,cidade:prmData.cidade,cep:prmData.cep,estado:prmData.estado,bairro:prmData.bairro};if(orderForm.marketingData){lead=_objectSpread(_objectSpread({},lead),{},{ext_utmsource:orderForm.marketingData.utmSource,ext_utmmedium:orderForm.marketingData.utmMedium,ext_utmcampaign:orderForm.marketingData.utmCampaign,ext_utmicampaign:orderForm.marketingData.utmiCampaign})}return lead},formEbookSuccess:function formEbookSuccess(ebook){$(".mz-product-ebook__modal--form input").val("");$(".mz-product-ebook__modal").addClass("mz-success");$(".mz-product-ebook__modal--btnOk").off("click").on("click",function(){$(".mz-product-ebook__modal").removeClass("modal-pos-visible");$(".mz-product-ebook__modal").removeClass("mz-success");$(document.body).removeClass("mz-product-ebook-on");window.open(ebook,"_blank")})},voucherVerifyCampaign:function voucherVerifyCampaign(){var cookie=$.cookie("TKOSMOS");$.get("".concat(window.storeConfig.kosmos.url,"/vtex/pos/mestre-indica/campaign/active?access_token=").concat(cookie)).done(function(response){if(response&&response.isActive){var utmCode=$.cookie("utm_voceindica");var regex=Product.regexList();var thisPage=window.location.href;Product.voucherUserApplyCode();Product.voucherUserRemoveCode();if(thisPage.match(regex.voucher)||utmCode){Product.voucherLoadApplyCode(utmCode)}$(".payment.voucher").show()}else{$(".payment.voucher").hide()}})},voucherLoadApplyCode:function voucherLoadApplyCode(code){var cookie=$.cookie("TKOSMOS");$.get("".concat(window.storeConfig.kosmos.url,"/vtex/pos/mestre-indica/validate/").concat(code,"?access_token=").concat(cookie)).done(function(response){if(response&&response.valid){Product.dataAll.dataVoucher.code=code;Product.dataAll.dataVoucher.name=response.professor;$("#mz-button-voucher").hide("fast");$("#mz-button-voucher-remove").show("fast");$("#mz-input-voucher").val(code);$("#mz-voucher-code").text(code);$("#mz-voucher-name").text(response.professor);$("#mz-input-voucher").addClass("input-success");$(".voucher-success").show("fast");$(".payment.voucher").show("fast")}else{$(".voucher-success, .voucher-wrong").hide("fast");$("#mz-input-voucher").addClass("input-wrong");$(".voucher-invalid").show("fast")}}).fail(function(e){$(".voucher-success, .voucher-invalid").hide("fast");$("#mz-button-voucher").hide("fast");$("#mz-button-voucher-remove").show("fast");$(".voucher-wrong").show("fast");$("#vtexIdContainer").remove();$("#vtexIdContainer").hide();setTimeout(function(){$("#vtexIdContainer, #vtexIdUI-global-loader").remove();$("#vtexIdUI-auth-selector").hide();$("#vtexIdUI-auth-selector").remove()},2500)})},voucherUserApplyCode:function voucherUserApplyCode(){$("#mz-button-voucher").on("click",function(){var codeInserted=$("#mz-input-voucher").val();var cookie=$.cookie("TKOSMOS");$.get("".concat(window.storeConfig.kosmos.url,"/vtex/pos/mestre-indica/validate/").concat(codeInserted,"?access_token=").concat(cookie)).done(function(response){if(response&&response.valid){$("#mz-button-voucher").hide("fast");$("#mz-input-voucher").removeClass("input-wrong");$(".voucher-invalid, .voucher-wrong").hide("fast");$("#mz-button-voucher-remove").show("fast");$("#mz-voucher-code").text(codeInserted);$("#mz-voucher-name").text(response.professor);$("#mz-input-voucher").addClass("input-success");$(".voucher-success").show("fast");Product.dataAll.dataVoucher.code=codeInserted;Product.dataAll.dataVoucher.name=response.professor}else{$(".voucher-success, .voucher-wrong").hide("fast");$("#mz-button-voucher").hide("fast");$("#mz-button-voucher-remove").show("fast");$("#mz-input-voucher").addClass("input-wrong");$(".voucher-invalid").show("fast")}}).fail(function(e){$(".voucher-success, .voucher-invalid").hide("fast");$("#mz-button-voucher").hide("fast");$("#mz-button-voucher-remove").show("fast");$(".voucher-wrong").show("fast");$("#vtexIdContainer").remove();$("#vtexIdContainer").hide();setTimeout(function(){$("#vtexIdContainer, #vtexIdUI-global-loader").remove();$("#vtexIdUI-auth-selector").hide();$("#vtexIdUI-auth-selector").remove()},2500)})})},voucherUserRemoveCode:function voucherUserRemoveCode(){$("#mz-button-voucher-remove").on("click",function(){$(this).hide();$(".voucher-success, .voucher-invalid, .voucher-wrong").hide();$("#mz-input-voucher").removeClass("input-success");$("#mz-input-voucher").removeClass("input-wrong");$("#mz-button-voucher").show("fast");$("#mz-input-voucher").val("");$("#mz-voucher-code").text("");$("#mz-voucher-name").text("");Product.dataAll.dataVoucher.code="";Product.dataAll.dataVoucher.name=""})},regexList:function regexList(){var rl={dot:/\./g,voucher:/utm_voceindica=\w+/g,findEAD:/EAD/g};return rl},select2:{matchStart:function matchStart(params,data){if($.trim(params.term)===""){return data}if(typeof data.children==="undefined"){return null}var filteredChildren=[];var searchTerm=params.term.replaceSpecialChars().toUpperCase();$.each(data.children,function(idx,child){var childText=child.text.replaceSpecialChars().toUpperCase();if(childText.toUpperCase().indexOf(searchTerm.toUpperCase())==0){filteredChildren.push(child)}});if(filteredChildren.length){var modifiedData=$.extend({},data,true);modifiedData.children=filteredChildren;return modifiedData}return null},matchCustom:function matchCustom(params,data){if($.trim(params.term)===""){return data}if(typeof data.text==="undefined"){return null}var searchTerm=params.term.replaceSpecialChars().toUpperCase();var dataText=data.text.replaceSpecialChars().toUpperCase();if(dataText.indexOf(searchTerm)>-1){var modifiedData=$.extend({},data,true);return modifiedData}return null}},ufs:{ACRE:"AC",ALAGOAS:"AL","AMAPÁ":"AP",AMAZONAS:"AM",BAHIA:"BA","CEARÁ":"CE","DISTRITO FEDERAL":"DF","ESPÍRITO SANTO":"ES","GOIÁS":"GO","MARANHÃO":"MA","MATO GROSSO":"MT","MATO GROSSO DO SUL":"MS","MINAS GERAIS":"MG","PARÁ":"PA","PARAÍBA":"PB","PARANÁ":"PR",PERNAMBUCO:"PE","PIAUÍ":"PI","RIO DE JANEIRO":"RJ","RIO GRANDE DO NORTE":"RN","RIO GRANDE DO SUL":"RS","RONDÔNIA":"RO",RORAIMA:"RR","SANTA CATARINA":"SC","SÃO PAULO":"SP",SERGIPE:"SE",TOCANTINS:"TO"}};Product.init();$(document).ready(Product.ready)}catch(e){console.error("Erro na instancia [Product]: ",e)}})();(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):g(window.jQuery||window.Zepto)})(function(g){var z=function z(b,f,d){var l=this,x,y;b=g(b);f="function"===typeof f?f(b.val(),void 0,b,d):f;l.init=function(){d=d||{};l.byPassKeys=[9,16,17,18,36,37,38,39,40,91];l.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};l.translation=g.extend({},l.translation,d.translation);l=g.extend(!0,{},l,d);y=c.getRegexMask();b.each(function(){!1!==d.maxlength&&b.attr("maxlength",f.length);d.placeholder&&b.attr("placeholder",d.placeholder);b.attr("autocomplete","off");c.destroyEvents();c.events();var a=c.getCaret();c.val(c.getMasked());c.setCaret(a+c.getMaskCharactersBeforeCount(a,!0))})};var c={getCaret:function getCaret(){var a;a=0;var e=b.get(0),c=document.selection,e=e.selectionStart;if(c&&!~navigator.appVersion.indexOf("MSIE 10"))a=c.createRange(),a.moveStart("character",b.is("input")?-b.val().length:-b.text().length),a=a.text.length;else if(e||"0"===e)a=e;return a},setCaret:function setCaret(a){if(b.is(":focus")){var e;e=b.get(0);e.setSelectionRange?e.setSelectionRange(a,a):e.createTextRange&&(e=e.createTextRange(),e.collapse(!0),e.moveEnd("character",a),e.moveStart("character",a),e.select())}},events:function events(){b.on("keydown.mask",function(){x=c.val()});b.on("keyup.mask",c.behaviour);b.on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)});b.on("change.mask",function(){b.data("changeCalled",!0)});b.on("blur.mask",function(a){a=g(a.target);a.prop("defaultValue")!==a.val()&&(a.prop("defaultValue",a.val()),a.data("changeCalled")||a.trigger("change"));a.data("changeCalled",!1)});b.on("focusout.mask",function(){d.clearIfNotMatch&&!y.test(c.val())&&c.val("")})},getRegexMask:function getRegexMask(){var a=[],e,b,c,d,k;for(k in f){(e=l.translation[f[k]])?(b=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),c=e.optional,(e=e.recursive)?(a.push(f[k]),d={digit:f[k],pattern:b}):a.push(c||e?b+"?":b)):a.push("\\"+f[k])}a=a.join("");d&&(a=a.replace(RegExp("("+d.digit+"(.*"+d.digit+")?)"),"($1)?").replace(RegExp(d.digit,"g"),d.pattern));return RegExp(a)},destroyEvents:function destroyEvents(){b.off("keydown.mask keyup.mask paste.mask drop.mask change.mask blur.mask focusout.mask").removeData("changeCalled")},val:function val(a){var e=b.is("input");return 0<arguments.length?e?b.val(a):b.text(a):e?b.val():b.text()},getMaskCharactersBeforeCount:function getMaskCharactersBeforeCount(a,e){for(var b=0,c=0,d=f.length;c<d&&c<a;c++){l.translation[f.charAt(c)]||(a=e?a+1:a,b++)}return b},determineCaretPos:function determineCaretPos(a,b,d,h){return l.translation[f.charAt(Math.min(a-1,f.length-1))]?Math.min(a+d-b-h,d):c.determineCaretPos(a+1,b,d,h)},behaviour:function behaviour(a){a=a||window.event;var b=a.keyCode||a.which;if(-1===g.inArray(b,l.byPassKeys)){var d=c.getCaret(),f=c.val(),n=f.length,k=d<n,p=c.getMasked(),m=p.length,q=c.getMaskCharactersBeforeCount(m-1)-c.getMaskCharactersBeforeCount(n-1);p!==f&&c.val(p);!k||65===b&&a.ctrlKey||(8!==b&&46!==b&&(d=c.determineCaretPos(d,n,m,q)),c.setCaret(d));return c.callbacks(a)}},getMasked:function getMasked(a){var b=[],g=c.val(),h=0,n=f.length,k=0,p=g.length,m=1,q="push",s=-1,r,u;d.reverse?(q="unshift",m=-1,r=0,h=n-1,k=p-1,u=function u(){return-1<h&&-1<k}):(r=n-1,u=function u(){return h<n&&k<p});for(;u();){var v=f.charAt(h),w=g.charAt(k),t=l.translation[v];if(t)w.match(t.pattern)?(b[q](w),t.recursive&&(-1===s?s=h:h===r&&(h=s-m),r===s&&(h-=m)),h+=m):t.optional&&(h+=m,k-=m),k+=m;else{if(!a)b[q](v);w===v&&(k+=m);h+=m}}a=f.charAt(r);n!==p+1||l.translation[a]||b.push(a);return b.join("")},callbacks:function callbacks(a){var e=c.val(),g=c.val()!==x;if(!0===g&&"function"===typeof d.onChange)d.onChange(e,a,b,d);if(!0===g&&"function"===typeof d.onKeyPress)d.onKeyPress(e,a,b,d);if("function"===typeof d.onComplete&&e.length===f.length)d.onComplete(e,a,b,d)}};l.remove=function(){var a=c.getCaret(),b=c.getMaskCharactersBeforeCount(a);c.destroyEvents();c.val(l.getCleanVal()).removeAttr("maxlength");c.setCaret(a-b)};l.getCleanVal=function(){return c.getMasked(!0)};l.init()};g.fn.mask=function(b,f){this.unmask();return this.each(function(){g(this).data("mask",new z(this,b,f))})};g.fn.unmask=function(){return this.each(function(){try{g(this).data("mask").remove()}catch(b){}})};g.fn.cleanVal=function(){return g(this).data("mask").getCleanVal()};g("*[data-mask]").each(function(){var b=g(this),f={};"true"===b.attr("data-mask-reverse")&&(f.reverse=!0);"false"===b.attr("data-mask-maxlength")&&(f.maxlength=!1);"true"===b.attr("data-mask-clearifnotmatch")&&(f.clearIfNotMatch=!0);b.mask(b.attr("data-mask"),f)})});