var t;t=function(t){t.utils.registerPlugin(new function(){var t=function(t,r){if(t<0&&(t=r+t),t<0||t>=r)throw new Error("ERR index out of range");return t};return{_listPlugin:!0,blpop:function(){throw new Error("not implemented yet")},brpop:function(){throw new Error("not implemented yet")},brpoplpush:function(t,r){throw new Error("not implemented yet")},lindex:function(r,e){var n=this.get(r)||[];try{e=t(e,n.length)}catch(t){return null}return n[e]},linsert:function(t,r,e,n){var o=-1,i=this.get(t)||[];if(0===i.length)return 0;if(void 0===n||void 0===e)throw new Error("ERR wrong number of arguments for 'linsert' command");if("BEFORE"!==r&&"AFTER"!==r)throw new Error("ERR syntax error");if("number"!=typeof e&&"string"!=typeof e)throw new Error("ERR syntax error");for(var s=0;s<i.length;s++)if(e===i[s]){o=s;break}return-1===o?o:(i.splice("AFTER"===r?s-1:s,0,n),this.set(t,i),i.length)},llen:function(t){return(this.get(t)||[]).length},lpop:function(t){var r=this.get(t)||[],e=r.shift();return 0===r.length?this.remove(t):this.set(t,r),e||null},lpush:function(t,r){var e=this.get(t)||[];return e.unshift(r),this.set(t,e),e.length},lpushx:function(t,r){throw new Error("not implemented yet")},lrange:function(t,r,e){var n=this.get(t)||[];return-1===e?n.slice(r):n.slice(r,e+1)},lrem:function(t,r,e){if(void 0===r||void 0===e)throw new Error("ERR wrong number of arguments for 'lrem' command");var n=this.get(t)||[];if(0===n.length)return 0;if("number"!=typeof e&&"string"!=typeof e)throw new Error("ERR syntax error");for(var o=r>=0?0:n.length-1,i=n.length,s=0,h=0;s<i&&(0===r||0!==r&&h!==Math.abs(r));)e===n[o]&&(n.splice(o,1),h++,r>=0&&o--),s++,r>=0?o++:o--;return 0===n.length?this.remove(t):this.set(t,n),h},lset:function(r,e,n){var o=this.get(r)||[];if(0===o.length)throw new Error("ERR no such key");return o[e=t(e,o.length)]=n,this.set(r,o),"OK"},ltrim:function(t,r,e){throw new Error("not implemented yet")},rpop:function(t){var r=this.get(t)||[],e=r.pop();return 0===r.length?this.remove(t):this.set(t,r),e||null},rpoplpush:function(t,r){throw new Error("not implemented yet")},rpush:function(t,r){var e=this.get(t)||[];return e.push(r),this.set(t,e),e.length},rpushx:function(t,r){throw new Error("not implemented yet")}}})},"function"==typeof define&&define.amd?define(["basil.js"],t):"object"==typeof exports?module.exports=t(require("./basil.js")):t(window.Basil);