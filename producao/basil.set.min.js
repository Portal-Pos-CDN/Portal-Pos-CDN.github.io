var t;t=function(t){t.utils.registerPlugin(new function(){var r=function(t,r){for(var e=0,n=t.length;e<n;e++)if(t[e]===r)return e;return-1},e=function(t,e){return r(t,e)>=0},n=function(t){for(var r,e,n=t.length;n;r=Math.floor(Math.random()*n),e=t[--n],t[n]=t[r],t[r]=e);return t},s=function(){for(var t=arguments[0],r=[],n=[],s=0,i=t.length;s<i;s++)r=r.concat(t[s]);for(s=0,i=r.length;s<i;s++)e(n,r[s])||n.push(r[s]);return n},i=function(){for(var t=(arguments=arguments[0])[0],r=[],n=[],s=1,i=arguments.length;s<i;s++)r=r.concat(arguments[s]);for(s=0,i=t.length;s<i;s++)e(r,t[s])||n.push(t[s]);return n},o=function(){for(var t=[],r=(arguments=arguments[0])[0],n=arguments.length,s=0,i=r.length;s<i;s++){var o=r[s];if(!e(t,o)){for(var h=1;h<n&&e(arguments[h],o);h++);h===n&&t.push(o)}}return t};return{_setPlugin:!0,sadd:function(r,n){var s=this.get(r)||[],i=0;if(t.utils.isArray(n)||(n=[n]),s.length>0)for(var o=0,h=n.length;o<h;o++)e(s,n[o])||(s.push(n[o]),i++);else s=n,i=n.length;return this.set(r,s),i},scard:function(t){return(this.get(t)||[]).length},sdiff:function(){var t,r,e=[];for(t=0,r=arguments.length;t<r;t++)e.push(this.smembers(arguments[t]));return i(e)},sdiffstore:function(t){var r,e,n=[];for(r=1,e=arguments.length;r<e;r++)n.push(this.smembers(arguments[r]));var s=i(n);return this.set(t,s),s.length},sinter:function(){var t,r,e=[];for(t=0,r=arguments.length;t<r;t++)e.push(this.smembers(arguments[t]));return o(e)},sinterstore:function(t){var r,e,n=[];for(r=1,e=arguments.length;r<e;r++)n.push(this.smembers(arguments[r]));var s=o(n);return this.set(t,s),s.length},sismember:function(t,r){return e(this.get(t)||[],r)?1:0},smembers:function(t){return this.get(t)||[]},smove:function(t,n,s){var i=this.get(t)||[],o=this.get(n)||[];return 0!==i.length&&e(i,s)?e(o,s)?0:(o.push(s),this.set(n,o),i.splice(r(i,s),1),0===i.length?this.remove(t):this.set(t,i),1):0},spop:function(t){var r,e=this.get(t)||[],n=e.length;return 0===n?null:(randomIndex=Math.floor(Math.random()*n),arguments[1]?r=e[randomIndex]:(r=e.splice(randomIndex,1)[0],0===e.length?this.remove(t):this.set(t,e)),r)},srandmember:function(t,r){var e=this.get(t)||[];if(void 0===r)return this.spop(t,!0);if(r>0)return n(e).splice(0,r);if(r<0){if(r=Math.abs(r),e.length>=r)return n(e).splice(0,r);for(var s,i=e.length,o=[];r;)s=Math.floor(Math.random()*i),o.push(e[s]),r--;return o}return this.spop(t,!0)},srem:function(n,s){var i=this.get(n)||[],o=0;if(0===i.length)return 0;t.utils.isArray(s)||(s=[s]);for(var h=0,u=s.length;h<u;h++){var f=s[h];e(i,f)&&(i.splice(r(i,f),1),o++)}return this.set(n,i),o},sunion:function(){var t,r,e=[];for(t=0,r=arguments.length;t<r;t++)e.push(this.smembers(arguments[t]));return s(e)},sunionstore:function(t){var r,e,n=[];for(r=1,e=arguments.length;r<e;r++)n.push(this.smembers(arguments[r]));var i=s(n);return this.set(t,i),i.length},sscan:function(){throw new Error("not implemented yet")}}})},"function"==typeof define&&define.amd?define(["basil.js"],t):"object"==typeof exports?module.exports=t(require("./basil.js")):t(window.Basil);