/* kuroda - 08/01/2021 13:26:50 GMT-0300 */
"use strict";(function(){try{var CountdownBF={init:function init(){CountdownBF.applyCountdown();CountdownBF.closeCountdown()},applyCountdown:function applyCountdown(){var dateInit="11/11/2020 15:20:00";var dateEnd="22/11/2020 12:00:00";if(!dateInit.length||!dateEnd.length){return}CountdownBF.compareteData(dateInit,dateEnd);if(!CountdownBF.compareteData(dateInit,dateEnd)){return}console.log("Data inicio: ",dateInit);console.log("Ddata final: ",dateEnd);console.log("\n");dateEnd=CountdownBF.revertEndDate(dateEnd);var rl=CountdownBF.regexList();if(dateInit==""){console.log("[CountdownBF] Opção Direta ------------------");$(".mz-bfcountdown.main").countdown(dateEnd,(function(event){$("#mz-bf-date-rendered").text(event.strftime("H{%-I} h MI{%M} min S{%S} sec"));var day=$("#mz-bf-date-rendered").text().match(rl.regexTime.day)[0];day=day.match(rl.regexDigit)[0];var hours=$("#mz-bf-date-rendered").text().match(rl.regexTime.hours)[0];hours=hours.match(rl.regexDigit)[0];var minutes=$("#mz-bf-date-rendered").text().match(rl.regexTime.minutes)[0];minutes=minutes.match(rl.regexDigit)[0];var seconds=$("#mz-bf-date-rendered").text().match(rl.regexTime.seconds)[0];seconds=seconds.match(rl.regexDigit)[0];$(".mz-bfcountdown.days-number").text(day);$(".mz-bfcountdown.hours-number").text(hours);$(".mz-bfcountdown.minu-number").text(minutes);$(".mz-bfcountdown.seg-number").text(seconds);$(this).on("update.countdown",(function(){if($(".mz-bfcountdown.days-number").text()==0){$(".mz-bfcountdown.days-number").parent().hide()}if($(".mz-bfcountdown.hours-number").text()==0){$(".mz-bfcountdown.hours-number").parent().hide()}if($(".mz-bfcountdown.minu-number").text()==0){$(".mz-bfcountdown.minu-number").parent().hide()}}));$(this).on("finish.countdown",(function(){$(".mz-bfcountdown.main").hide()}))}))}else if(dateInit.length==19&&dateEnd.length==19){console.log("[CountdownBF] Opção Agendada ------------------");var currentDate;var formatDtInit=dateInit;formatDtInit=formatDtInit.split(rl.regexTrace);formatDtInit=formatDtInit[1]+"/"+formatDtInit[0]+"/"+formatDtInit[2];var verifyCurrentDate=setInterval((function(){var captureDate=new Date;currentDate=$.format.date(captureDate,"dd/MM/yyyy HH:mm:ss");var rcCurrentDate=currentDate;currentDate=currentDate.split(rl.regexTrace);currentDate=currentDate[1]+"/"+currentDate[0]+"/"+currentDate[2];var dateCurrent=new Date(currentDate);var dateInitial=new Date(formatDtInit);if(dateCurrent<dateInitial){console.log(rcCurrentDate);$(".mz-bfcountdown.main").hide()}else{clearInterval(verifyCurrentDate);$(".mz-bfcountdown.main").countdown(dateEnd,(function(event){$("#mz-bf-date-rendered").text(event.strftime("D{%-d} H{%-H} h MI{%M} min S{%S} sec"));var day=$("#mz-bf-date-rendered").text().match(rl.regexTime.day)[0];day=day.match(rl.regexDigit)[0];var hours=$("#mz-bf-date-rendered").text().match(rl.regexTime.hours)[0];hours=hours.match(rl.regexDigit)[0];var minutes=$("#mz-bf-date-rendered").text().match(rl.regexTime.minutes)[0];minutes=minutes.match(rl.regexDigit)[0];var seconds=$("#mz-bf-date-rendered").text().match(rl.regexTime.seconds)[0];seconds=seconds.match(rl.regexDigit)[0];$(".mz-bfcountdown.days-number").text(day);$(".mz-bfcountdown.hours-number").text(hours);$(".mz-bfcountdown.minu-number").text(minutes);$(".mz-bfcountdown.seg-number").text(seconds);$(this).on("update.countdown",(function(){if($(".mz-bfcountdown.days-number").text()==0){$(".mz-bfcountdown.days-number").parent().hide()}if($(".mz-bfcountdown.days-number").text()==0&&$(".mz-bfcountdown.hours-number").text()==0){$(".mz-bfcountdown.hours-number").parent().hide()}if($(".mz-bfcountdown.days-number").text()==0&&$(".mz-bfcountdown.hours-number").text()==0&&$(".mz-bfcountdown.minu-number").text()==0){$(".mz-bfcountdown.minu-number").parent().hide()}if($(".mz-bfcountdown.days-number").text()==1){$(".mz-bfcountdown.days-text").text("Dia")}if($(".mz-bfcountdown.hours-number").text()==1){$(".mz-bfcountdown.hours-text").text("Hora")}if($(".mz-bfcountdown.minu-number").text()=="01"){$(".mz-bfcountdown.minu-text").text("Minuto")}if($(".mz-bfcountdown.minu-number").text()!="01"){$(".mz-bfcountdown.minu-text").text("Minutos")}if($(".mz-bfcountdown.days-number").text()==0&&$(".mz-bfcountdown.hours-number").text()==0&&$(".mz-bfcountdown.minu-number").text()=="00"){$(".mz-bfcountdown.seg-number").addClass("finishing")}}));$(this).on("finish.countdown",(function(){$(".mz-bfcountdown.main").hide()}))}))}}),1e3)}else{console.error("[CountdownBF] Alguma Data na formato errado! Verifique o tamanho.")}},revertEndDate:function revertEndDate(dateEnd){var rl={regexTrace:/\//g,regexDateEnd:/[0-9]{2}\/[0-9]{2}\/[0-9]{4}/g};var dateToReverse=dateEnd.match(rl.regexDateEnd)[0];dateToReverse=dateToReverse.split(rl.regexTrace);var dateHours=dateEnd.split(" ")[1];var day=dateToReverse[0];var mont=dateToReverse[1];var year=dateToReverse[2];var dateUnify=year+"/"+mont+"/"+day+" "+dateHours;return dateUnify},compareteData:function compareteData(dateOne,dateTwo){var rl=CountdownBF.regexList();dateOne=dateOne.split(rl.regexTrace);dateOne=dateOne[1]+"/"+dateOne[0]+"/"+dateOne[2];dateTwo=dateTwo.split(rl.regexTrace);dateTwo=dateTwo[1]+"/"+dateTwo[0]+"/"+dateTwo[2];var formatedDataOne=new Date(dateOne);var formatedDataTwo=new Date(dateTwo);if(formatedDataOne>formatedDataTwo){console.error("[CountdownBF] Erro no cadastro, a data agendada é maior que a data de encerramento.");return false}else if(formatedDataOne.length<19&&formatedDataTwo.length<19){console.error("[CountdownBF] Erro no cadastro, as datas não estão nos formatos corretos. [length]");return false}else if(formatedDataOne=="Invalid Date"&&formatedDataTwo=="Invalid Date"){console.error("[CountdownBF] Erro no cadastro, as datas não estão nos formatos corretos. [invalid]");return false}else{return true}},regexList:function regexList(){var rl={regexDigit:/\d+/g,regexTrace:/\//g,regexDateEnd:/[0-9]{2}\/[0-9]{2}\/[0-9]{4}/g,regexTime:{mont:/MT{[0-9]{1,2}}/g,week:/W{[0-9]{1,2}}/g,day:/D{[0-9]{1,2}}/g,hours:/H{[0-9]{1,3}/g,minutes:/MI{[0-9]{1,2}/g,seconds:/S{[0-9]{2}/}};return rl},closeCountdown:function closeCountdown(){$(".mz-bfcountdown.close").on("click",(function(e){e.preventDefault();$(this).closest(".mz-bfcountdown.main").hide("fast")}))}};$(document).ready(CountdownBF.init)}catch(e){console.log("Erro na instancia [CountdownBF]: ",e)}})();