/* MEWTWO - 03/11/2020 12:08:10 GMT */
"use strict";(function(){try{var BlackFriday={init:function init(){BlackFriday.verifyCoockieAndUnlockContent();BlackFriday.getLocationInStorage();BlackFriday.onSubmitClick();BlackFriday.fixShelfTitle();BlackFriday.applyDownloadDirectPDFS();BlackFriday.questionsSlider();BlackFriday.applyModal()},dataAll:{state:""},verifyCoockieAndUnlockContent:function verifyCoockieAndUnlockContent(){var coockieSeted=$.cookie("mzBlackFriday");if(coockieSeted=="cadastrado"){$("a.read-more, a.download").removeClass("locked");return}$("a.read-more, a.download").addClass("locked");$("#mz-list-guide li").attr("data-unlocked","false")},openModalToUnlockContent:function openModalToUnlockContent(){$(".mz-bf__guide.content div").on("click",function(){$(document.body).addClass("mz-modal-bf-on")})},getLocationInStorage:function getLocationInStorage(){if(localStorage&&localStorage.mzGeoInfo&&localStorage.mzGeoInfo.length){var locationSeted=JSON.parse(localStorage.mzGeoInfo);console.log("A");BlackFriday.dataAll.state=locationSeted.state.toUpperCase();console.log(BlackFriday.dataAll.state);BlackFriday.prepareClause()}else{BlackFriday.userSetLocation()}},userSetLocation:function userSetLocation(){$(window).on("MZ.locationLoaded",function(){if(!localStorage.mzGeoInfo||!localStorage.mzGeoInfo.length){console.log("Localização não encontrada.");return}console.log("Localização feita.")})},getBrandIdFromName:function getBrandIdFromName(brandName){var brand=window.storeConfig.brands.filter(function(brand){if(brand.name.replaceSpecialChars().toLowerCase()==brandName.replaceSpecialChars().toLowerCase()){return brand}});if(brand){return brand[0].id}return null},prepareClause:function prepareClause(){var whereClause="";if($.cookie("marcaOrigem")){var brandId=BlackFriday.getBrandIdFromName($.cookie("marcaOrigem"));whereClause="?whereClause=";switch($.cookie("marcaOrigem")){case"anhanguera":whereClause+="(idMarca='".concat(brandId,"' OR idMarca='16')")+" OR (idMarca='19' AND idModalidade != 'PRESENCIAL')";break;default:whereClause+="(idMarca='".concat(brandId,"' OR (idMarca='1' AND idModalidade != 'PRESENCIAL') OR (idMarca='19' AND idModalidade != 'PRESENCIAL') )")}console.log("Marca ID: ",brandId)}console.log("B");BlackFriday.getModality(whereClause)},getModality:function getModality(whereClause){var urlModality=window.storeConfig.middleware.url+"/ofertas/modalidades/?"+whereClause;console.log("C");$.ajax({url:urlModality,type:"GET",dataType:"json"}).done(function(response){console.log("D");console.log(response);$("#mz-select-modality").select2({placeholder:"Todas as modalidades",minimumResultsForSearch:-1,data:BlackFriday.facetsToArray(response,"idModalidade").map(function(item){if(~window.location.search.indexOf("superbusca")){switch(item.text){case"EAD":return"EDUCAÇÃO A DISTÂNCIA";case"PRESENCIAL":return"PRESENCIAL";case"INTENSIVO":return"EAD 6 MESES";case"SEMI_PRESENCIAL":return"SEMIPRESENCIAL";default:return item.text}}switch(item.text){case"EAD":return"EAD 10 MESES";case"PRESENCIAL":return"PRESENCIAL";case"INTENSIVO":return"EAD 6 MESES";case"SEMI_PRESENCIAL":return"SEMIPRESENCIAL";default:return item.text}})});console.log("E")});BlackFriday.getCourses(whereClause)},getCourses:function getCourses(whereClause){$("#mz-select-modality").on("change",function(){console.log("Trocado!");var urlCourse=window.storeConfig.middleware.url+"/ofertas/cursos/?"+whereClause;$.ajax({type:"GET",url:urlCourse,dataType:"json"}).done(function(response){console.log("F");console.log(response);$("#mz-select-course").select2({placeholder:"Todos os Cursos",matcher:BlackFriday.select2.matchCustom,data:BlackFriday.facetsToArray(response,"nomeCurso")})})})},applyDownloadDirectPDFS:function applyDownloadDirectPDFS(){$("#mz-pdf-one").attr("href","https://drive.google.com/uc?id=10YCygIeO0Vvx3FmK2jTmeMlZowevZn6t&export=download");$("#mz-pdf-two").attr("href","https://drive.google.com/uc?id=1kr6ABNB0pZZXS2l9_PnlJESeioUxRcdS&export=download");$("#mz-pdf-tree").attr("href","https://drive.google.com/uc?id=10ldGW1fmARS4uILvv4ar_pkj9VFhaomS&export=download");$("#mz-pdf-four").attr("href","https://drive.google.com/uc?id=1VZkWI1dkJYiE6TxocmEs_4THfjmFl5DK&export=download");$("#mz-pdf-five").attr("href","https://drive.google.com/uc?id=1X2L9TiMsJlvuCoU5AYq3R8Nvpm0IIW_e&export=download");$("#mz-pdf-six").attr("href","https://drive.google.com/uc?id=15Zc_W6IuQEoQZ5-u2Nt9dl1-otD2gL14&export=download");$("#mz-pdf-seven").attr("href","https://drive.google.com/uc?id=1ho9vD2BLRzYxR4k4CSmEE9sxGPf6jkv7&export=download")},questionsSlider:function questionsSlider(){$(".mz-bf__questions.blocks button").on("click",function(){var $t=$(this);$t.toggleClass("actived");$t.parent().next().slideToggle("fast")})},fixShelfTitle:function fixShelfTitle(){var wrapperFind=$(".mz-shelf h2");wrapperFind.each(function(){var $t=$(this);var targetAppend=$t.closest(".mz-shelf").find(".mz-shelf__title");$t.appendTo(targetAppend)})},applyModal:function applyModal(){$("#mz-list-guide > li").on("click",function(){console.log("Clicado!");$(document.body).addClass("mz-modal-bf-on")});$(".mz-modal__close button, .mz-bgoverlay").on("click",function(){$(document.body).removeClass("mz-modal-bf-on")})},getSpecificationParamByName:function getSpecificationParamByName(name){var productFields=window.storeConfig.productFields;if(productFields[name.toLowerCase()]){return"specificationFilter_"+productFields[name.toLowerCase()]}else{console.error("Unrecognized productFields name");return name}},getVTEXModality:function getVTEXModality(modality){switch(modality){case"EDUCAÇÃO A DISTÂNCIA":return"Educação a distância";case"EAD 10 MESES":return"EAD - 10 meses";case"PRESENCIAL":return"Presencial";case"EAD 6 MESES":return"EAD - 6 meses";case"SEMI_PRESENCIAL":return"Semi-presencial"}},getRedirectUrl:function getRedirectUrl(locationType,locationName,modality,course){var paths=[];var mapParams=[];var url="";paths.push("cursos");mapParams.push("c");if($("body").hasClass("marca-lfg")){paths.push("lfg");mapParams.push("b")}paths.push(locationName);mapParams.push(BlackFriday.getSpecificationParamByName(locationType));if(modality){paths.push(modality);mapParams.push(BlackFriday.getSpecificationParamByName("Modalidade"))}if(course){paths.push(course);mapParams.push(BlackFriday.getSpecificationParamByName("Nome Curso"))}if($.cookie("marcaOrigem")&&!$("body").hasClass("marca-lfg")&&$.cookie("marcaOrigem")!=="anhanguera"&&$.cookie("marcaOrigem")!=="uniderp"){var collectionId="";var brand=$.cookie("marcaOrigem");if(brand=="unopar"){collectionId=window.linksMenuHeader[$.cookie("marcaOrigem")].colecao.split("?O=")[0]}else{collectionId=window.linksMenuHeader[$.cookie("marcaOrigem")].split("?O=")[0]}paths.push(collectionId);mapParams.push("productClusterSearchableIds")}url=paths.join("/")+"/?map="+mapParams.join(",");url+="&homeSearch=true";url+="&O=OrderByNameASC";return url},redirect:function redirect(url){if($("body").hasClass("marca")){$.ajax({url:encodeURI("/api/catalog_system/pub/products/search/"+url),type:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},complete:function complete(jqXHR,textStatus){var data=JSON.parse(jqXHR.responseText);if(data.length==1&&textStatus=="success"){window.location=encodeURI(location.origin+"/"+data[0].linkText+"/p")}else{window.location=encodeURI(location.origin+"/"+url)}}})}else{window.location=encodeURI(location.origin+"/"+url)}},onSubmitClick:function onSubmitClick(){$(".mz-bf__filter.selects button.btn").one("click",function(){BlackFriday.onSubmit()})},onSubmit:function onSubmit(){var locationName=BlackFriday.dataAll.state;var locationType="nomeUF";var modality=BlackFriday.getVTEXModality($("#mz-select-modality").select2("data")[0].text);var course=$("#mz-select-course").select2("data")[0].text;if(!locationName){return}var url=BlackFriday.getRedirectUrl(locationType,locationName,modality,course);window.storeHelpers.generic.setSearchLocation(locationType,locationName);window.storeHelpers.generic.setAdvancedSearchResult(locationName,modality||"Todas as modalidades",course||"Todas os cursos");BlackFriday.redirect(url)},facetsToArray:function facetsToArray(object,field){var fieldItems=Object.keys(object.filter(function(item){if(item.field==field)return item})[0].facets);fieldItems=fieldItems.filter(function(item,index){if(item)return item});fieldItems.unshift("");fieldItems.sort();return fieldItems.map(function(item,index){if(item==""){return{id:"",text:""}}return{id:field+"---"+item,text:item}})},select2:{matchStart:function matchStart(params,data){if($.trim(params.term)===""){return data}if(typeof data.children==="undefined"){return null}var filteredChildren=[];var searchTerm=params.term.replaceSpecialChars().toUpperCase();$.each(data.children,function(idx,child){var childText=child.text.replaceSpecialChars().toUpperCase();if(childText.toUpperCase().indexOf(searchTerm.toUpperCase())==0){filteredChildren.push(child)}});if(filteredChildren.length){var modifiedData=$.extend({},data,true);modifiedData.children=filteredChildren;return modifiedData}return null},matchCustom:function matchCustom(params,data){if($.trim(params.term)===""){return data}if(typeof data.text==="undefined"){return null}var searchTerm=params.term.replaceSpecialChars().toUpperCase();var dataText=data.text.replaceSpecialChars().toUpperCase();if(dataText.indexOf(searchTerm)>-1){var modifiedData=$.extend({},data,true);return modifiedData}return null}}};$(document).ready(BlackFriday.init)}catch(e){console.log("Erro na instancia [BlackFriday - V2]: ",e)}})();!function(e){function n(e){var n=e.value||"";return n.length||(n=null),n}e.fn.serializeObject=function(){"use strict";var a={},t=function t(_t,i){var o=a[i.name];"undefined"!=typeof o&&null!==o?e.isArray(o)?o.push(n(i)):a[i.name]=[o,n(i)]:a[i.name]=n(i)};return e.each(this.serializeArray(),t),a}}(jQuery);