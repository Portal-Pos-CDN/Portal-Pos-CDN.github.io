/* oliva-Latitude-3470 - 30/11/2020 19:47:48 GMT-0300 */
"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}(function(){try{var UpCursos={init:function init(){UpCursos.applyFilters();UpCursos.bringAllCourses();UpCursos.removeBgOverlay();UpCursos.validateForm()},bgOverlay:"mz-modal-on",showModal:function showModal(){$(document.body).addClass(UpCursos.bgOverlay)},removeBgOverlay:function removeBgOverlay(){$(".mz-modal__close button, .mz-bgoverlay").click((function(){$(document.body).removeClass(UpCursos.bgOverlay);UpCursos.clearInfoModal()}))},clearInfoModal:function clearInfoModal(){var wrapper=$(".mz-upcmodal");wrapper.find(".info-course").empty();wrapper.find(".info-area").empty();wrapper.find(".info-charge").empty();wrapper.find(".info-subjects").empty();wrapper.find(".info-graduation").empty()},applyFilters:function applyFilters(){var selectCategorys=$("#mz-select-area");var selectCourses=$("#mz-select-courses");selectCategorys.change((function(){selectCourses.html('<option value="" selected="selected">Selecione um curso</option>');selectCourses.attr("disabled","disabled");UpCursos.clearInfoModal();var ajaxLoader=$(".mz-loder-courses.main");ajaxLoader.fadeIn("fast");var $t=$(this);var thisCategory=$t.val();var urlTarget;var routeAPI="/api/dataentities/adminlpcursos/search?_schema=mz-body&categoria=";urlTarget=routeAPI+thisCategory;$("section[data-filter-categories]").each((function(){var thisCat=$(this);if(thisCat.attr("data-filter-categories")!=thisCategory){thisCat.hide("fast")}else{thisCat.show("fast");thisCat.find(".mz-button-showmore").hide()}}));$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-1000"}}).done((function(response){var thisList=response;var option;thisList.forEach((function(course){option='<option value="'.concat(course.id,'">').concat(course.curso,"</option>");selectCourses.append(option)}));selectCourses.removeAttr("disabled");$('section[data-filter-categories="'.concat(thisCategory,'"] .row')).html("");response.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);$('section[data-filter-categories="'.concat(thisCategory,'"] .row')).append(thisCourseElement)}));UpCursos.applyFiltersCourses(thisCategory,selectCourses);UpCursos.showDetailsCourse();UpCursos.applyBackToForm();ajaxLoader.fadeOut("fast")}))}))},applyFiltersCourses:function applyFiltersCourses(thisCategory,selectCourses){selectCourses.change((function(){var $t=$(this);var thisId=$t.val();var wrapperThisCourses=$('section[data-filter-categories="'.concat(thisCategory,'"]'));wrapperThisCourses.find(".row > div").each((function(){var thisBlock=$(this);var thisBlockID=thisBlock.find(".mz-courses__indentificator").text();if(thisId!=thisBlockID){thisBlock.hide("fast")}else{thisBlock.show("fast")}}))}))},bringAllCourses:function bringAllCourses(){try{var urlTarget;var routeAPI="/api/dataentities/adminlpcursos/search?_schema=mz-body&categoria=";var listCategories={aev:"agricultura-e-veterinaria",css:"ciencias-sociais-servicos-e-outros",cet:"ciencias-exatas-e-tecnologia",cah:"comunicacao-artes-e-humanidades",dto:"direito",eco:"educacao",eea:"engenharia-e-arquitetura",see:"saude-esporte-e-estetica",nma:"negocio-mba",med:"mestrado-e-doutorado"};var ajaxLoader=$(".mz-loder-courses.main");ajaxLoader.fadeIn("fast");urlTarget=routeAPI+listCategories.aev;var wrapperAEV=$("#mz-aev");var loaderAEV=wrapperAEV.next().next();loaderAEV.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperAEV.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperAEV.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperAEV.append(thisCourseElement)}));loaderAEV.fadeOut("fast")}));urlTarget=routeAPI+listCategories.css;var wrapperCSS=$("#mz-css");var loaderCSS=wrapperCSS.next().next();loaderCSS.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperCSS.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperCSS.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperCSS.append(thisCourseElement)}));loaderCSS.fadeOut("fast")}));urlTarget=routeAPI+listCategories.cet;var wrapperCET=$("#mz-cet");var loaderCET=wrapperCET.next().next();loaderCET.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperCET.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperCET.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperCET.append(thisCourseElement)}));loaderCET.fadeOut("fast")}));urlTarget=routeAPI+listCategories.cah;var wrapperCAH=$("#mz-cha");var loaderCAH=wrapperCAH.next().next();loaderCAH.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperCAH.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperCAH.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperCAH.append(thisCourseElement)}));loaderCAH.fadeOut("fast")}));urlTarget=routeAPI+listCategories.dto;var wrapperDTO=$("#mz-dto");var loaderDTO=wrapperDTO.next().next();loaderDTO.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperDTO.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperDTO.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperDTO.append(thisCourseElement)}));loaderDTO.fadeOut("fast")}));urlTarget=routeAPI+listCategories.eco;var wrapperECO=$("#mz-eco");var loaderECO=wrapperECO.next().next();loaderECO.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperECO.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperECO.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperECO.append(thisCourseElement)}));loaderECO.fadeOut("fast")}));urlTarget=routeAPI+listCategories.eea;var wrapperEEA=$("#mz-eea");var loaderEEA=wrapperEEA.next().next();loaderEEA.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperEEA.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperEEA.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperEEA.append(thisCourseElement)}));loaderEEA.fadeOut("fast")}));urlTarget=routeAPI+listCategories.see;var wrapperSEE=$("#mz-see");var loaderSEE=wrapperSEE.next().next();loaderSEE.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperSEE.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperSEE.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperSEE.append(thisCourseElement)}));loaderSEE.fadeOut("fast")}));urlTarget=routeAPI+listCategories.nma;var wrapperNMA=$("#mz-nma");var loaderNMA=wrapperNMA.next().next();loaderNMA.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){if(!response.length){wrapperNMA.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperNMA.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperNMA.append(thisCourseElement)}));loaderNMA.fadeOut("fast")}));urlTarget=routeAPI+listCategories.med;var wrapperMED=$("#mz-med");var loaderMED=wrapperMED.next().next();loaderMED.fadeIn("fast");$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=0-4"}}).done((function(response){UpCursos.showMoreCourses();UpCursos.showDetailsCourse();UpCursos.applyBackToForm();ajaxLoader.fadeOut("fast");if(!response.length){wrapperMED.closest("section").hide();return}var listCourses=response;listCourses.sort();if(listCourses.length<4){wrapperMED.next().hide()}listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);wrapperMED.append(thisCourseElement)}));loaderMED.fadeOut("fast")}))}catch(e){console.log("Erro nas requests dos cursos: ",e.message)}},showMoreCourses:function showMoreCourses(){$(".container > .mz-button-showmore > a[data-categories]").one("click",(function(){var ajaxLoader=$(this).parent().next();ajaxLoader.fadeIn("fast");var $t=$(this);var thisCategorie=$t.attr("data-categories");var thisUrl="/api/dataentities/adminlpcursos/search?_schema=mz-body&categoria=".concat(thisCategorie);var thisWrapper=$t.parent().prev();$.ajax({type:"GET",method:"GET",url:thisUrl,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8","REST-Range":"resources=4-1000"}}).done((function(response){if(!response.length){return}$t.hide();var listCourses=response;listCourses.sort();listCourses.forEach((function(item){var thisCourseElement=UpCursos.renderCourse(item.id,item.curso,item.imagemthumb);thisWrapper.append(thisCourseElement)}));UpCursos.showMoreCourses();UpCursos.showDetailsCourse();UpCursos.applyBackToForm();ajaxLoader.fadeOut("fast")}))}))},showDetailsCourse:function showDetailsCourse(){var thisButtonDetails=$(".mz-courses__text .mz-courses__text--details");thisButtonDetails.click((function(){var $t=$(this);var thisId=$t.closest(".mz-courses").find(".mz-courses__indentificator").text();var thisUrl="/api/dataentities/adminlpcursos/search?_schema=mz-body&id=".concat(thisId);$.ajax({type:"GET",method:"GET",url:thisUrl,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done((function(response){var thisData=response[0];UpCursos.setDetailsInModal(thisData);UpCursos.showModal()}))}))},setDetailsInModal:function setDetailsInModal(courseInfos){var wrapper=$(".mz-upcmodal__details--infos");var regex=/,/g;var listSubject=courseInfos.disciplinas.split(regex);var listGraduation=courseInfos.modalidade.split(regex);wrapper.prev().find("img").attr("src",courseInfos.imagemthumb);wrapper.find(".info-course").text(courseInfos.curso);wrapper.find(".info-area").text(courseInfos.area);wrapper.find(".info-charge").text(courseInfos.carga);wrapper.find(".info-subjects").html(" ");listSubject.forEach((function(item){var thisLI=$("<li></li>");var thisItem=item.trim();thisLI.text(thisItem);wrapper.find(".info-subjects").append(thisLI)}));wrapper.find(".info-graduation").html(" ");listGraduation.forEach((function(item){var thisLI=$("<li></li>");var thisItem=item.trim();thisLI.text(thisItem);wrapper.find(".info-graduation").append(thisLI)}))},applyBackToForm:function applyBackToForm(){var thisButton=$(".mz-courses__text--register, .mz-modal-register");thisButton.click((function(){if(thisButton.is(".mz-modal-register")){$(document.body).removeClass(UpCursos.bgOverlay)}$("html, body").animate({scrollTop:0},1e3)}))},renderCourse:function renderCourse(id,curso,imagemUrl){if(curso.length>=50){curso=curso.substring(0,50);curso=curso+"..."}var course='\n                    <div class="col-xs-12 col-sm-3 col-md-3">\n                        <div class="mz-courses">\n                            <span class="mz-courses__indentificator hide">'.concat(id,'</span>\n                            <div class="mz-courses__image">\n                                <img src="').concat(imagemUrl,'" />\n                            </div>\n                            <div class="mz-courses__text">\n                                <h3>').concat(curso,'</h3>\n                                <a class="mz-courses__text--details">Veja detalhes do curso</a>\n                                <a class="mz-courses__text--register">Inscreva-se!</a>\n                            </div>\n                        </div>\n                    </div>\n                ');return course},validateForm:function validateForm(){if(!$.fn.validate){return}$("#mz-upcursos-form").validate({rules:{email:{required:true,email:true}},messages:{email:{required:"Preencha o e-mail",email:"E-mail inválido"}},submitHandler:function submitHandler(form,event){event.preventDefault();var $form=$(form);var isValid=$form.valid();if(!isValid){return}var formData=$form.serializeObject();var data=_objectSpread(_objectSpread({},formData),{},{isStudent:!!formData.isStudent});UpCursos.chaordic.updateUserEmail(data.name,data.email);UpCursos.sendMasterData(data)},errorPlacement:function errorPlacement(error,element){element.closest(".form-group").append(error)}})},sendMasterData:function sendMasterData(formData){var accountName=window.jsnomeLoja!="portalpos2"||window.jsnomeLoja!="portalposqa"?"portalpos2":"portalposqa";$.ajax({url:"/api/dataentities/LB/documents?an="+accountName,type:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(formData),success:function success(data){console.info("Dados enviados com sucesso!",data)},error:function error(_error){UpCursos.formError()},complete:function complete(jqXHR,textStatus){if(formData.isStudent){UpCursos.sendPersone(formData)}else{UpCursos.formSuccess()}}})},sendPersone:function sendPersone(data){var lead=UpCursos.getCallCenterLead(data);$.ajax({dataType:"json",processData:false,contentType:false,type:"POST",data:UpCursos.goodSale.getFormData(lead),url:UpCursos.goodSale.url,success:function success(prmData){UpCursos.formSuccess()},error:function error(_error2){UpCursos.formError()}})},getCallCenterLead:function getCallCenterLead(prmData){var orderForm=JSON.parse(localStorage.getItem("orderForm"));var lead={f_campoUnico:"email",f_fila:2,f_atualizaRegistro:true,f_campanhaTelemarketing:"22",f_cadastraOrigem:true,origem:"PortalPos",f_cadastraCategoria:true,categoria:"Landing Page",f_cadastraTipo:true,tipo:"Lead",nome:prmData.nome,email:prmData.email,celular:prmData.telefone?UpCursos.goodSale.normalizeTel(prmData.telefone):null,ext_areadoconhecimento:prmData.areaConhecimento,observacoes:"Página: "+window.location.href+"\nMarca Site: "+($.cookie("marcaOrigem")||"portalpos")+" \nLanding Page: "+(window.vtxctx.searchTerm||"")};if(orderForm&&orderForm.marketingData){lead.ext_utmsource=orderForm.marketingData.utmSource;lead.ext_utmmedium=orderForm.marketingData.utmMedium;lead.ext_utmcampaign=orderForm.marketingData.utmCampaign;lead.ext_utmicampaign=orderForm.marketingData.utmiCampaign}return lead},formSuccess:function formSuccess(){swal({title:"Seus dados foram enviados!",icon:"success"}).then((function(){window.location.reload()}))},formError:function formError(){swal({icon:"error",text:"Erro ao enviar os dados!"})},resetForm:function resetForm(){$("#mz-upcursos-form").find("input, select").val("")},chaordic:{updateUserEmail:function updateUserEmail(name,email){try{chaordic.push(["updateUserEmail",{email:email,name:name}])}catch(e){console.log("Chaordic updateUserEmail error")}}},goodSale:{url:"https://api.goodsales.com.br/contatos/cadastrar_lead",token:"db40045d1d587c359f587697d2d60dbc",clearDigit:function clearDigit(prmText){if(prmText.length){return prmText.match(/\d/g).join("")}else{return""}},normalizeTel:function normalizeTel(prmTel){if(prmTel){prmTel=UpCursos.goodSale.clearDigit(prmTel);prmTel=UpCursos.goodSale.trimText(prmTel);if(prmTel.indexOf("55")==0){prmTel=prmTel.substring(2)}}return prmTel},trimText:function trimText(prmText){return $.trim(prmText)},getFormData:function getFormData(prmObject){var formData=new FormData;prmObject.token=UpCursos.goodSale.token;Object.keys(prmObject).map((function(item){formData.append(item,UpCursos.goodSale.trimText(prmObject[item]))}));return formData}}};UpCursos.init()}catch(e){console.log("Erro na Instância de [UpCursos]: ",e.message)}})();